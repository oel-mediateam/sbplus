$(document).load(function(){$("noscript").hide()}),$(document).ready(function(){function e(e){var t="[\\?&]"+e+"=([^&#]*)",i=new RegExp(t),n=i.exec(window.location.href);return e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))}function t(e){var t=$(e).find("setup"),s=$(e).find("topic"),r=$(e).find("profile").text(),a=t.find("lesson").text().length<=0?"Lesson name is not specified":t.find("lesson").text(),o=t.find("instructor").text().length<=0?"Instructor is not specified":'<a class="instructorP" href="#profile">'+t.find("instructor").text()+"</a>",d=t.find("length").text().length<=0?"":t.find("length").text();Q=t.find("note").text().length<=0?!1:t.find("note").text(),Q="yes"===Q||"y"===Q?!0:!1,Q||($("#note").hide(),$("#fontMinusBtn").hide(),$("#fontPlusBtn").hide(),$("#fontSizeIndicator").hide(),$("#toc").css("height","399px")),U=t.find("slideImgFormat").text().length<=0?"png":t.find("slideImgFormat").text(),L=$(e),$("#lessonTitle").html(a),$("#instructorName").html(o),$("#profile .bio").html("<p>"+t.find("instructor").text()+"</p>"+r),M=[],D=[],s.each(function(){var e=$(this).attr("title");M[E]=$(this).attr("src"),C===!0?($("#selectable").html('<li class="ui-widget-content" title="'+e+'"><div style="width:10%;padding:0px 1%;text-align:right;float:left;">'+(10>E+1?"0"+(E+1):E+1)+'.</div><div class="title" style="width:86%;padding:0px 1%;float:left;">'+e+"</div></li>"),C=!1):$("#selectable").append('<li class="ui-widget-content" title="'+e+'"><div style="width:10%;padding:0px 1%;text-align:right;float:left;">'+(10>E+1?"0"+(E+1):E+1)+'.</div><div class="title" style="width:86%;padding:0px 1%;float:left;">'+e+"</div></li>"),"quiz"===M[E]&&(W={},W.id=E,W.type=L.find("topic:eq("+E+")").find("quiz").attr("type"),W.question=L.find("topic:eq("+E+")").find("quiz").find("question").text(),""!==L.find("topic:eq("+E+")").find("quiz").find("choice").text()?(W.choice=i(L.find("topic:eq("+E+")").find("quiz").find("choice").text()),W.wrongFeedback=i(L.find("topic:eq("+E+")").find("quiz").find("wrongFeedback").text())):W.wrongFeedback=L.find("topic:eq("+E+")").find("quiz").find("wrongFeedback").text(),W.answer=i(L.find("topic:eq("+E+")").find("quiz").find("answer").text()),W.stuAnswer="",W.correct=!1,W.correctFeedback=L.find("topic:eq("+E+")").find("quiz").find("correctFeedback").text(),W.taken=!1,D.push(W)),E++}),$(document).attr("title",a),$("#splash_screen").append("<p>"+a+"</p><p>"+(t.find("instructor").text().length<=0?"Instructor is not specified":t.find("instructor").text())+"</p>"+(0!==d?"<p><small>"+d+"</small></p>":"")+'<a class="playBtn" href="#"></a>'),$("#splash_screen").css("background-image","url(assets/splash.jpg)"),Q||$("#splash_screen").css({height:"230px","padding-top":"100px","padding-bottom":"100px","padding-right":"200px","padding-left":"200px"}),$("#splash_screen, #playBtn").on("click",function(){return n(a),$("#splash_screen").hide(),!1}),a=a.toLowerCase().replace("-","_").replace(" ","_"),f(h(),"mp3"),f(h(),"pdf")}function i(e){var t=0,i=[],n=e,s,r;for(n+="|",r=n.indexOf("|");-1!==n.indexOf("|");)s=n.substring(0,r),n=n.substring(r+1),r=n.indexOf("|"),i[t]=s,t++;return i}function n(){$("#player").show(),jQuery.each(M,function(e){var t=M[e].substring(0,M[e].indexOf(":")+1);return"video:"!==t&&"youtube:"!==t?(g="Slide",!1):void(g="Video")}),s(M[0],F),$("#selectable li:first").addClass("ui-selected"),$("#errorMsg").hide(),$("#selectable").selectable({stop:function(){$(".ui-selected",this).each(function(){j=$("#selectable li").index(this)+1}),j!==_&&(s(M[j-1],j),_=j)}}),a(),$("a#info, a.instructorP").fancybox({helpers:{overlay:{css:{background:"rgba(250, 250, 250, 0.85)"}}},padding:0}),Q&&($("#fontSizeIndicator").html(k),$("#fontMinusBtn").on("click",function(){k-=2,q-=2,z-=2,A-=2,I-=2,O-=2,T-=2,P-=2,12>=k&&(k=12,q=16),16>=T&&(T=16,P=20),18>=I&&(I=18,O=22),20>=z&&(z=20,A=24),$("#note, #note p").css({"font-size":k,"line-height":q+"px"}),$("#note h1").css({"font-size":z,"line-height":O+"px"}),$("#note h2").css({"font-size":I,"line-height":O+"px"}),$("#note h3, #note h4, #note h5, #note h6").css({"font-size":T,"line-height":P+"px"}),$("#fontSizeIndicator").html(k)}),$("#fontPlusBtn").on("click",function(){k+=2,q+=2,z+=2,A+=2,I+=2,O+=2,T+=2,P+=2,k>=28&&(k=28,q=32),T>=30&&(T=30,P=34),I>=32&&(I=32,O=36),z>=34&&(z=34,A=38),$("#note, #note p").css({"font-size":k,"line-height":q+"px"}),$("#note h1").css({"font-size":z,"line-height":A+"px"}),$("#note h2").css({"font-size":I,"line-height":O+"px"}),$("#note h3, #note h4, #note h5, #note h6").css({"font-size":T,"line-height":P+"px"}),$("#fontSizeIndicator").html(k)})),$("#leftBtn").on("click",function(){F--,0>=F&&(F=E),s(M[F-1],F)}),$("#rightBtn").on("click",function(){F++,F>E&&(F=1),s(M[F-1],F)})}function s(e,t){var i,n,s;if(t=10>t?"0"+t:t,i=Number(t)-1,n=Number(t)-1,$("#slide").html('<div id="progressing"></div>'),$("#progressing").fadeIn(),R&&($("#vp").html(""),$("#vp").hide(),R=!1),N&&(H.setCurrentTime(0),H.pause(),N=!1,Q?($("#ap").hide(),$("#note").height($("#note").height()+30)):($("#apm").hide(),$("#currentStatus").css("width","76.85%"))),"image:"===e.substring(0,e.indexOf(":")+1))s=new Image,B="assets/slides/"+e.substring(e.indexOf(":")+1)+"."+U,V=$("#selectable li .title").get(i).innerHTML,$(s).load(function(){$(this).hide(),$("#slide").append('<a id="img" title="'+V+'"href="'+B+'">'),$("#slide #img").html(s),$("#slide").append('</a><div class="magnifyIcon"></div>'),$(this).fadeIn(),$("a#img").fancybox({helpers:{overlay:{css:{background:"rgba(250, 250, 250, 0.85)"}}},padding:0}),d(!0)}).error(function(e){$("#slide").html("<p><strong>Error</strong>: image not found. Image path: "+B+"</p><p>Total number of slides: "+E+"</p><p>"+e+"</p>")}).attr({src:B,border:0});else if("youtube:"===e.substring(0,e.indexOf(":")+1))d(!1),$("#slide").append('<iframe width="640" height="360" src="https://www.youtube.com/embed/'+e.substring(e.indexOf(":")+1)+'?autoplay=1&rel=0" frameborder="0" allowfullscreen></iframe>');else if("video:"===e.substring(0,e.indexOf(":")+1)){d(!1);var a=$.now(),l="vpc"+a;$("#vp").append('<video id="'+l+'" class="video-js vjs-default-skin" controls autoplay width="640" height="360">'+(u(e.substring(e.indexOf(":")+1))?'<track kind="subtitles" src="assets/video/'+e.substring(e.indexOf(":")+1)+'.vtt" srclang="en" label="English" default>':"")+"</video>"),R||($("#vp").show(),videojs(l,{},function(){this.progressTips(),this.src([{type:"video/mp4",src:"assets/video/"+e.substring(e.indexOf(":")+1)+".mp4"},{type:"video/webm",src:"assets/video/"+e.substring(e.indexOf(":")+1)+".webm"}])}),videojs.options.flash.swf="sources/videoplayer/video-js.swf",R=!0)}else if("swf:"===e.substring(0,e.indexOf(":")+1))d(!1),$("#slide").append('<object width="640" height="360" type="application/x-shockwave-flash" data="assets/swf/'+e.substring(e.indexOf(":")+1)+'.swf"><param name="movie" value="assets/swf/'+e+'.swf" /><p>Your web browser does not support Adobe Flash.</p></object>');else if("image-audio:"===e.substring(0,e.indexOf(":")+1))s=new Image,B="assets/slides/"+e.substring(e.indexOf(":")+1)+"."+U,V=$("#selectable li .title").get(i).innerHTML,$(s).load(function(){if($(this).hide(),$("#slide").append('<a id="img" title="'+V+'"href="'+B+'">'),$("#slide #img").html(s),$("#slide").append('</a><div class="magnifyIcon"></div>'),$(this).fadeIn(),$("a#img").fancybox({helpers:{overlay:{css:{background:"rgba(250, 250, 250, 0.85)"}}},padding:0}),d(!0),!N){var t;Q?($("#ap").show(),S!==!0?(H=new MediaElementPlayer("#apc",{audioWidth:640,audioHeight:30,startVolume:.8,loop:!1,enableAutosize:!0,iPadUseNativeControls:!1,iPhoneUseNativeControls:!1,AndroidUseNativeControls:!1,pauseOtherPlayers:!0,type:"audio/mpeg",success:function(i){t=[{src:"assets/audio/"+e.substring(e.indexOf(":")+1)+".mp3",type:"audio/mpeg"}],i.setSrc(t),i.load()}}),S=!0):(t=[{src:"assets/audio/"+e.substring(e.indexOf(":")+1)+".mp3",type:"audio/mpeg"}],H.setSrc(t)),$("#note").height($("#note").height()-30)):($("#apm").show(),S!==!0?(H=new MediaElementPlayer("#apcm",{audioWidth:300,audioHeight:30,startVolume:.8,loop:!1,enableAutosize:!0,iPadUseNativeControls:!1,iPhoneUseNativeControls:!1,AndroidUseNativeControls:!1,pauseOtherPlayers:!0,type:"audio/mpeg",success:function(i){t=[{src:"assets/audio/"+e.substring(e.indexOf(":")+1)+".mp3",type:"audio/mpeg"}],i.setSrc(t),i.load()}}),S=!0):(t=[{src:"assets/audio/"+e.substring(e.indexOf(":")+1)+".mp3",type:"audio/mpeg"}],H.setSrc(t)),$("#currentStatus").css("width","30%")),N=!0}}).error(function(e){$("#slide").html("<p><strong>Error</strong>: image not found. Image path: "+B+"</p><p>"+e+"</p>")}).attr({src:B,border:0});else if("quiz"===e)try{c(i)}catch(p){console.append("<li>"+p+"</li>")}else $("#slide").html("<p>ERROR!</p>");r(n),o(t),$("#progressing").hide()}function r(e){var t=L.find("topic:eq("+e+")").find("note").text();$("#note").html(t),$("#note").find("a").length&&$("#note a").each(function(){$(this).attr("target","_blank")})}function a(){var e=new Image,t="assets/pic.jpg";$(e).load(function(){$("#profile .photo").html('<img src="'+t+'" alt="Instructor Photo" border="0" />')}).error(function(){$("#profile .photo").html('<img src="assets/img/profile.png" width="200" height="300" alt="No Profile Photo" border="0" />')}).attr({src:t,border:0})}function o(e){F=e,$("#selectable li").each(function(){$(this).removeClass("ui-selected")}),$("#selectable li:nth-child("+Number(e)+")").addClass("ui-selected"),$("#currentStatus").html(g+" "+e+" of "+(10>E?"0"+E:E))}function d(e){e&&$(".magnifyIcon").on("click",function(){$.fancybox.open({href:B,title:V,helpers:{overlay:{css:{background:"rgba(250, 250, 250, 0.85)"}}},padding:0})})}function c(e){for(;!Y||G===D.length;)D[G].id===e?Y=!0:G++;if($("#slide").append('<div id="quiz"><div class="header">Quiz '+(G+1)+" of "+D.length+"</div>"),$("#quiz").hide(),$("#quiz").fadeIn(),D[G].taken)l(G);else{if($("#quiz").append('<div class="question">'+D[G].question+"</div>"),"t/f"===D[G].type)$("#quiz").append('<div class="answerArea"><label for="t"><input id="t" type="radio" name="tf" value="true" /> True</label><label for="f"><input type="radio" id="f" name="tf" value="false" /> False</label></div>');else if("fib"===D[G].type)$("#quiz").append('<div class="answerArea"><textarea id="saAns"></textArea></div>');else if("mc"===D[G].type){$("#quiz").append('<div class="answerArea">');for(var t=0;t<D[G].choice.length;t++)$(".answerArea").append('<label for="'+t+'"><input id="'+t+'" type="radio" name="mc" value="'+D[G].choice[t]+'" /> '+D[G].choice[t]+"</label>");$("#quiz").append("</div>")}else $("#quiz").append("sa"===D[G].type?'<div class="answerArea"><textarea id="saAns"></textArea></div>':'<div class="answerArea">ERROR!</div>');$("#quiz").append('<div class="submitArea"><button id="check" rel="'+G+'">SUBMIT</button></div>'),$("#check").click(function(){var e=Number($(this).attr("rel")),t;if("t/f"===D[e].type?(t=$("input:radio[name=tf]:checked").val(),void 0===t&&(t="")):"fib"===D[e].type?t=$.trim($("#saAns").val()):"mc"===D[e].type?(t=$("input:radio[name=mc]:checked").val(),D[e].incorrectIndex=$("input:radio[name=mc]").index($("input:radio[name=mc]").filter(":checked")),void 0===t&&(t="")):"sa"===D[e].type?t=$.trim($("#saAns").val()):$.trim(t),""!==t){for(var i=0;i<D[e].answer.length;i++)if("fib"===D[e].type){var n=0;for(n;n<D[e].answer.length;n++)if(t.toLowerCase()===D[e].answer[n].toLowerCase()){D[e].correct=!0;break}}else"t/f"===D[e].type?D[e].correct=t.toLowerCase()===D[e].answer[i].toLowerCase()?!0:!1:"mc"===D[e].type&&(D[e].correct=t.toLowerCase()===D[e].answer[i].toLowerCase()?!0:!1);D[e].stuAnswer=t,D[e].taken=!0,l(e)}else alert("Please answer the question before submitting.")})}$("#slide").append("</div>"),G=0,Y=!1}function l(e){var t="";$("#slide").html('<div id="quiz"><div class="header">Quiz '+(e+1)+" of "+D.length+" Feedback</div>"),"sa"!==D[e].type&&$("#quiz").append(D[e].correct?'<p class="quizCorrect">Correct!</p>':'<p class="quizIncorrect">Incorrect!</p>'),$("#quiz").append('<div class="question">'+D[e].question+"</div>"),$("#quiz").append('<div class="feedback"><p><strong>Your answer</strong>: '+D[e].stuAnswer+"</p>");for(var i=0;i<D[e].answer.length;i++)t+=i===D[e].answer.length-1?D[e].answer[i]:D[e].answer[i]+", ";if($(".feedback").append("<p><strong>Correct answer</strong>: "+t+"</p></div>"),"sa"!==D[e].type)if(D[e].correct)$(".feedback").append("<p><strong>Feedback:</strong> "+D[e].correctFeedback+"</p>");else if("mc"===D[e].type){var n=D[e].wrongFeedback[D[e].incorrectIndex];"undefined"==typeof n&&(n=""),$(".feedback").append("<p><strong>Feedback:</strong> "+n+"</p>")}else $(".feedback").append("<p><strong>Feedback:</strong> "+D[e].wrongFeedback+"</p>")}function p(e,t){var i,n;i=0===e?"<strong>Error 0</strong> - Not connect. Please verify network.":404===e?"<strong>Error 404</strong> - Requested page not found.":406===e?"<strong>Error 406</strong> - Not acceptable error.":500===e?"<strong>Error 500</strong> - Internal Server Error.":"Unknow error",n="parsererror"===t?"Requested XML parse failed.":"timeout"===t?"Time out error.":"abort"===t?"Ajax request aborted.":"error"===t?"HTTP / URL Error (most likely a 404 or 406).":"Uncaught Error.\n"+e.responseText,$("#player").hide(),$("#errorMsg").html("<p>"+i+"<br />"+n+"</p>")}function f(e,t){var i;i="pdf"===t?"application/pdf":"audio/mpeg",$.ajax({url:e+"."+t,type:"HEAD",dataType:"text",contentType:i,async:!1,beforeSend:function(e){e.overrideMimeType(i),e.setRequestHeader("Accept",i)},success:function(){var i=e,n=$("#download_bar ul"),s=window.location.protocol;if("http:"!==s){var r=window.location.href;r=r.substr(0,r.lastIndexOf("/")+1).replace("https","http"),i=r+e}"pdf"===t?n.append('<li><a href="'+i+"."+t+'" target="_blank">Transcript</a></li>'):"mp3"===t&&n.append('<li><a href="'+i+"."+t+'" target="_blank">Audio</a></li>')},error:function(){}})}function u(e){var t=!1;return $.ajax({url:"assets/video/"+e+".vtt",type:"HEAD",dataType:"text",contentType:"text/vtt",async:!1,beforeSend:function(e){e.overrideMimeType("text/vtt"),e.setRequestHeader("Accept","text/vtt")},success:function(){t=!0},error:function(){t=!1}}),t}function h(){var e=window.location.href,t;return t=e.split("?"),t=t[0].split("/"),t=t[t.length-2]}var g="Slide",m=navigator.userAgent,b={iphone:m.match(/(iPhone|iPod|iPad)/),blackberry:m.match(/BlackBerry/),android:m.match(/Android/)},v="0"===e("m")?!1:!0;if((b.iphone||b.ipod||b.ipad||b.blackberry||b.android)&&v){var x=window.location.href,w,y=x.indexOf(".");w=x.substr(y),x="http://webstreamer"+w+"?m=0",$("#player").hide(),$("body").html('<div style="text-align:center; width:450px; height:315px;"><a href="'+x+'" target="_blank"><img src="https://mediastreamer.doit.wisc.edu/uwli-ltc/media/storybook_plus/img/view_on_full_site.png" width="450px" height="315px" alt="Launch Presentation in New Window" border="0" /></a></div>')}else{var k=14,q=18,z=22,A=26,I=20,O=24,T=18,P=22,C=!0,S=!1,E=0,F=1,_=0,j=0,N=!1,R=!1,L,M,U,B,H,Q=!1,V,W,D,Y=!1,G=0;$.ajaxSetup({url:"assets/topic.xml",type:"GET",dataType:"xml",accepts:"xml",content:"xml",contentType:'xml; charset="utf-8"',cache:!1}),$.ajax({encoding:"UTF-8",beforeSend:function(e){e.overrideMimeType("xml; charset=utf-8"),e.setRequestHeader("Accept","text/xml")},success:function(e){t(e)},error:function(e,t){p(e.status,t)}})}});
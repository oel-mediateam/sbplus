window.MWEMBED_VERSION="2.20",window.SCRIPT_LOADER_URL="http://cdnapi.kaltura.com/html5/html5lib/v2.20/load.php",function(){"use strict";if(!window.kWidget){var e={startTime:{},loadTime:{},readyWidgets:{},readyCallbacks:[],destroyedWidgets:{},perWidgetCallback:{},readyCallbackPerWidget:{},listenerList:{},userAgentPlayerRules:{},alreadyAddedThumbRules:!1,iframeAutoEmbedCache:{},setup:function(){var e=this;mw.setConfig("version",MWEMBED_VERSION),this.checkEnvironment(),this.overrideFlashEmbedMethods(),this.proxyJsCallbackready(),this.domReady(function(){e.domIsReady=!0,e.proxyJsCallbackready()}),this.domReady(function(){e.rewriteObjectTags()})},checkEnvironment:function(){-1===document.URL.indexOf("forceMobileHTML5")||mw.getConfig("disableForceMobileHTML5")||mw.setConfig("forceMobileHTML5",!0),-1!==document.URL.indexOf("debugKalturaPlayer")&&mw.setConfig("debug",!0),-1!==document.URL.indexOf("forceKPlayer")&&mw.setConfig("EmbedPlayer.ForceKPlayer",!0);var e=navigator.userAgent,t=e.match(/MSIE\s([0-9]+)/);if((t&&parseInt(t[1])<9||-1!==document.URL.indexOf("forceFlash"))&&mw.setConfig("Kaltura.ForceFlashOnDesktop",!0),-1!=e.indexOf("BlackBerry")&&(mw.setConfig("EmbedPlayer.DisableVideoTagSupport",!0),mw.setConfig("EmbedPlayer.NotPlayableDownloadLink",!0)),-1!=e.indexOf("kalturaNativeCordovaPlayer")&&(mw.setConfig("EmbedPlayer.ForceNativeComponent",!0),!mw.getConfig("EmbedPlayer.IsIframeServer"))){var i,r;i=this.isAndroid()?"/modules/EmbedPlayer/binPlayers/cordova/android/cordova.js":"/modules/EmbedPlayer/binPlayers/cordova/ios/cordova.js",r="/kWidget/cordova.kWidget.js",document.write('<script src="'+this.getPath()+i+'"></script>'),document.write('<script src="'+this.getPath()+r+'"></script>')}/(iPhone|iPod|iPad)/i.test(e)&&(/OS [2-4]_\d(_\d)? like Mac OS X/i.test(e)||/CPU like Mac OS X/i.test(e))&&mw.setConfig("Kaltura.UseAppleAdaptive",!1),mw.getConfig("EmbedPlayer.IsIframeServer")||(mw.setConfig("EmbedPlayer.IframeParentUrl",document.URL),mw.setConfig("EmbedPlayer.IframeParentTitle",document.title),mw.setConfig("EmbedPlayer.IframeParentReferrer",document.referrer),/(iPhone|iPod|iPad)/i.test(navigator.userAgent)&&/OS [1-5](.*) like Mac OS X/i.test(navigator.userAgent)&&(window.onpageshow=function(e){e.persisted&&(document.body.style.display="none",location.reload())}))},proxiedJsCallback:null,waitForLibraryChecks:!0,jsReadyCalledForIds:[],proxyJsCallbackready:function(){var e=this,t=function(t){return e.waitForLibraryChecks?void e.jsReadyCalledForIds.push(t):void e.jsCallbackReady(t)};this.proxiedJsCallback||(this.proxiedJsCallback=window.jsCallbackReady||!0,window.jsCallbackReady=t),window.jsCallbackReady.toString()!=t.toString()&&(this.proxiedJsCallback=window.jsCallbackReady,window.jsCallbackReady=t)},jsCallbackReady:function(e){var t=this;if(t.log("jsCallbackReady for "+e),!this.destroyedWidgets[e]){var i=document.getElementById(e);if(!i||!i.evaluate)return this.callJsCallback(),void this.log("Error:: jsCallbackReady called on invalid player Id:"+e);this.extendJsListener(i);var r=i.evaluate("{playerStatusProxy.kdpVersion}");mw.versionIsAtLeast("v3.7.0",r)&&i.kBind("kdpReady",function(){t.loadTime[e]=(((new Date).getTime()-t.startTime[e])/1e3).toFixed(2),i.setKDPAttribute("playerStatusProxy","loadTime",t.loadTime[e]),t.log("Player ("+e+"):"+t.loadTime[e])}),mw.getConfig("EmbedPlayer.IsIframeServer")||(document.onclick=function(){i.sendNotification("onFocusOutOfIframe")}),"function"==typeof this.proxiedJsCallback&&this.proxiedJsCallback(e),this.callJsCallback(e)}},callJsCallback:function(e){for(var t=0;t<this.readyCallbacks.length;t++)this.readyCallbacks[t](e);e&&(this.readyWidgets[e]=!0)},playerModeChecksDone:function(){this.waitForLibraryChecks=!1;for(var e=0;e<this.jsReadyCalledForIds.length;e++){var t=this.jsReadyCalledForIds[e];this.jsCallbackReady(t)}this.jsReadyCalledForIds=[]},isDownloadLinkPlayer:function(){return window.location.href.indexOf("forceDownloadPlayer")>-1||mw.getConfig("EmbedPlayer.NotPlayableDownloadLink")?!0:!1},embed:function(e,t){function i(e){t[e]&&(parseInt(t[e])==t[e]&&(t[e]+="px"),o.style[e]=t[e])}if(this.isDownloadLinkPlayer())return this.thumbEmbed(e,t,!0);var r=this;if("object"==typeof e&&(t=e,t.targetId||this.log("Error: Missing target element Id"),e=t.targetId),t.flashvars||(t.flashvars={}),this.startTime[e]=(new Date).getTime(),t.flashvars||(t.flashvars={}),-1!==document.URL.indexOf("forceKalturaNativeComponentPlayer")&&(t.flashvars.nativeCallout={plugin:!0}),!t.wid)return void this.log("Error: kWidget.embed missing wid");var a=t.uiconf_id,n=t.flashvars.confFilePath;if(!a&&!n)return void this.log("Error: kWidget.embed missing uiconf_id or confFile");var o=document.getElementById(e);if(!o)return this.log("Error: kWidget.embed could not find target: "+e),!1;if("kaltura_player_iframe_no_rewrite"!=o.getAttribute("name")){if("auto"==t.flashvars.localizationCode){var s=window.navigator.userLanguage||window.navigator.language;t.flashvars.localizationCode=s.split("-")[0]}try{o.innerHTML=""}catch(l){}if(i("width"),i("height"),this.destroyedWidgets[e]&&delete this.destroyedWidgets[e],mw.getConfig("Kaltura.ForceIframeEmbed")===!0)return void this.outputIframeWithoutApi(e,t);if(t.readyCallback){var d=!this.perWidgetCallback[e];this.perWidgetCallback[e]=t.readyCallback,d&&this.addReadyCallback(function(t){t==e&&r.perWidgetCallback[t]&&r.perWidgetCallback[t](t)})}this.proxyJsCallbackready(),t.isHTML5=this.isUiConfIdHTML5(a);var c=function(){if(a&&r.userAgentPlayerRules&&r.userAgentPlayerRules[a]){var i=r.checkUserAgentPlayerRules(r.userAgentPlayerRules[a]);switch(i.mode){case"flash":if("object"==o.nodeName.toLowerCase())return;break;case"leadWithHTML5":t.isHTML5=r.isUiConfIdHTML5(a);break;case"forceMsg":var n=i.val;if(o&&o.parentNode){var s=document.createElement("div");s.innerHTML=unescape(n),o.parentNode.replaceChild(s,o)}return}}mw.getConfig("EmbedPlayer.ForceNativeComponent")?r.outputCordovaPlayer(e,t):t.isHTML5?r.outputHTML5Iframe(e,t):r.outputFlashObject(e,t)},u=[{kEmbedSettings:t}];this.loadUiConfJs(u,function(){r.proxyJsCallbackready(),c()})}},outputCordovaPlayer:function(e,t){var i=this;cordova&&cordova.kWidget?cordova.kWidget.embed(e,t):setTimeout(function(){i.outputCordovaPlayer(e,t)},500)},addThumbCssRules:function(){if(!this.alreadyAddedThumbRules){this.alreadyAddedThumbRules=!0;var e=document.createElement("STYLE");e.type="text/css";var t=this.getPath()+"/modules/MwEmbedSupport/skins/common/images/",i=".kWidgetCentered {max-height: 100%; max-width: 100%; position: absolute; top: 0; left: 0; right: 0; bottom: 0; margin: auto; } \n.kWidgetPlayBtn { cursor:pointer;height: 53px !important;;width: 70px !important;top: 50% !important;; left: 50% !important;; margin-top: -26.5px; margin-left: -35px; background: url('"+t+"player_big_play_button.png') !important;;z-index: 1;} \n.kWidgetPlayBtn:hover{ background: url('"+t+"player_big_play_button_hover.png');\"} ";this.isIE()?e.styleSheet.cssText=i:e.innerHTML=i,document.getElementsByTagName("HEAD")[0].appendChild(e)}},getComputedSize:function(e,t){var i=navigator.userAgent;return-1!=i.indexOf("msie")&&-1==i.indexOf("opera")?document.getElementById(theElt)["offset"+t[0].toUpperCase()+t.substr(1)]:parseInt(document.defaultView.getComputedStyle(e,"").getPropertyValue(t))},thumbEmbed:function(t,i,r){this.isDownloadLinkPlayer()&&(r=!0);var a=this;"object"==typeof t?(i=t,i.targetId||this.log("Error: Missing target element Id"),t=i.targetId):i.targetId=t,i.flashvars||(i.flashvars={}),this.addThumbCssRules();var n=document.getElementById(t);n||this.log("Error could not find target id, for thumbEmbed"),n.innerHTML='<div style="position: relative; width: 100%; height: 100%;"><img class="kWidgetCentered" src="'+this.getKalturaThumbUrl(i)+'" ><div class="kWidgetCentered kWidgetPlayBtn" id="'+t+'_playBtn"></div></div>';var o=document.getElementById(t+"_playBtn");this.addEvent(o,"click",function(){if(i.readyCallback)var t=i.readyCallback;i.readyCallback=function(e){var i=document.getElementById(e);i.kBind("mediaReady",function(){i.sendNotification("doPlay")}),"function"==typeof t&&t(e)},i.captureClickEventForiOS=!0,r?window.open(a.getDownloadLink(i)):e.embed(i)}),i.thumbReadyCallback&&i.thumbReadyCallback(t)},destroy:function(e){if("string"==typeof e&&(e=document.getElementById(e)),!e)return void this.log("Error destory called without valid target");var t=e.id,i=e.style.cssText,r=e.className,a=e.getAttribute("id");for(var n in this.readyWidgets)n==a&&delete this.readyWidgets[n];this.destroyedWidgets[a]=!0;var o=document.createElement("div");o.style.cssText=i,o.id=t,o.className=r,e.parentNode.replaceChild(o,e)},embedFromObjects:function(e){for(var t=0;t<e.length;t++){var i=e[t].kEmbedSettings;i.width=e[t].width,i.height=e[t].height,this.embed(e[t].id,e[t].kEmbedSettings)}},extendJsListener:function(t){var i=this;t.kBind=function(r,a){var n=0,o="",s=this;if("string"==typeof r){var l=r.split(".",2),d=l[1]?l[1]:"kWidget";r=l[0]}if("string"==typeof a)o=a;else{if("function"!=typeof a)return void e.log("Error: kWidget : bad callback type: "+a);var c=function(){o="kWidget_"+r+"_cb"+n,window[o]&&(n++,c())};c(),window[o]=function(){var e=Array.prototype.slice.call(arguments,0);mw.getConfig("debug")?setTimeout(function(){a.apply(s,e)},0):a.apply(s,e)}}return i.listenerList[d]||(i.listenerList[d]={}),i.listenerList[d][r]||(i.listenerList[d][r]=o),t.addJsListener(r,o),t},t.kUnbind=function(e,r){if("string"==typeof e){var a=e.split(".",2),n=a[1];if(e=a[0],n){for(var o in i.listenerList[n])e?o==e&&(t.removeJsListener(o,i.listenerList[n][o]),delete i.listenerList[n][o]):t.removeJsListener(o,i.listenerList[n][o]);i.listenerList[n]=null}else{var s="string"==typeof r;s&&t.removeJsListener(e,r);for(var n in i.listenerList)for(var o in i.listenerList[n])o==e&&(s||t.removeJsListener(e,i.listenerList[n][o]),delete i.listenerList[n][o])}}return t}},outputFlashObject:function(t,i,r){r=r||document;var a=r.getElementById(t);if(!a&&!a.parentNode)return void e.log("Error embed target missing");if(!i.src){var n=mw.getConfig("Kaltura.ServiceUrl")+"/index.php/kwidget/wid/"+i.wid+"/uiconf_id/"+i.uiconf_id;i.entry_id&&(n+="/entry_id/"+i.entry_id),i.cache_st&&(n+="/cache_st/"+i.cache_st),i.src=n}i.id=a.id,a.setAttribute("id",a.id+"_container");var o=r.createElement("span");i.flashvars||(i.flashvars={}),i.flashvars.jsCallbackReadyFunc&&e.log("Error: Setting jsCallbackReadyFunc is not compatible with kWidget embed"),mw.getConfig("debug",!0)&&(i.flashvars.debug=!0);var s=this.flashVarsToString(i.flashvars),l={allowFullScreen:"true",allowNetworking:"all",allowScriptAccess:"always",bgcolor:"#000000"},d='<object style="'+a.style.cssText.replace(/^\s+|\s+$/g,"")+';display:block;"  class="'+a.className+'"  id="'+t+'" name="'+t+'"';if(d+=' data="'+i.src+'" type="application/x-shockwave-flash"',window.ActiveXObject&&(d+=' classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'),d+=">",d+='<param name="movie" value="'+i.src+'" />',d+='<param name="flashvars" value="'+s+'" />',i.params)for(var c in i.params)l[c]?l[c]=i.params[c]:d+='<param name="'+c+'" value="'+i.params[c]+'" />';for(var c in l)l[c]&&(d+='<param name="'+c+'" value="'+l[c]+'" />');d+="</object>";var u=function(){a.parentNode.replaceChild(o,a),o.innerHTML=d};window.console&&(window.console.firebug||window.console.exception)?(console.log("Warning firebug + firefox and dynamic flash kdp embed causes lockups in firefox, ( delaying embed )"),this.domReady(function(){setTimeout(function(){u()},2e3)})):-1!=navigator.userAgent.indexOf("MSIE")?setTimeout(function(){u()},0):u()},outputHTML5Iframe:function(e,t){var i=this,r=document.getElementById(e),a=r.id+"_ifp",n="border:0px; max-width: 100%; max-height: 100%; width:100%;height:100%;",o=document.createElement("iframe");o.id=a,o.scrolling="no",o.name=a,o.className="mwEmbedKalturaIframe",o.setAttribute("aria-labelledby","Player "+e),o.setAttribute("aria-describedby","The Kaltura Dynamic Video Player"),o.setAttribute("allowfullscreen",!0),o.setAttribute("webkitallowfullscreen",!0),o.setAttribute("mozallowfullscreen",!0),o.style.cssText=n;var s=document.createElement("div");s.id=r.id,s.name=r.name;var l=r.className?" "+r.className:"";if(s.className="kWidgetIframeContainer"+l,s.style.cssText=r.style.cssText+";overflow: hidden",s.appendChild(o),r.parentNode.replaceChild(s,r),t.captureClickEventForiOS&&(this.isIOS()||this.isAndroid()))return void this.captureClickWrapedIframeUpdate(e,t,o);var d=this.getIframeCbName(e);if(window[d]=function(e){var t=o.contentWindow.document;t.open(),t.write(e.content),t.close(),window[d]=null},this.iframeAutoEmbedCache[e])window[d](this.iframeAutoEmbedCache[e]);else if(t.flashvars.jsonConfig){var c=t.flashvars.jsonConfig;t.flashvars.jsonConfig=null,$.ajax({type:"POST",dataType:"text",url:this.getIframeUrl()+"?"+this.getIframeRequest(r,t),data:{jsonConfig:c}}).success(function(e){var t={content:e};window[d](t)}).error(function(e){alert("error occur")})}else i.appendScriptUrl(this.getIframeUrl()+"?"+this.getIframeRequest(r,t)+"&callback="+d)},getIframeCbName:function(e){for(var t=this,i=0,r="mwi_"+e.replace(/[^0-9a-zA-Z]/g,""),a=r+i;window[a];)t.log("Warning: iframe callback already defined: "+a),i++,a=r+i;return a},captureClickWrapedIframeUpdate:function(e,t,i){var r=this,a=document.getElementById(e),n=i.contentDocument;n.open();var o=location.protocol+"//www.kaltura.com/p/243342/sp/24334200/playManifest/entryId/1_vp5cng42/flavorId/1_6wf0o9n7/format/url/protocol/http/a.mp4";n.write('<html><head></head><body><div class="mwPlayerContainer"  style="width: 100%; height: 100%"><div class="videoHolder"><video class="persistentNativePlayer" id="'+e+'" kwidgetid="'+t.wid+'" kentryid="'+t.entry_id+'" kuiconfid="'+t.uiconf_id+'" src="'+o+'" style="width:100%;height:100%" ></video></div></div><script>document.getElementById(\''+e+'\').play();</script><div id="scriptsHolder"></div></body></html>'),n.close();var s=this.getIframeCbName(e);window[s]=function(e){var t=i.contentDocument.getElementsByTagName("head")[0]||i.documentElement;t.innerHTML=e.rawHead,i.contentDocument.getElementById("scriptsHolder").innerHTML=e.rawScripts;for(var r=function(e,t){return e.nodeName&&e.nodeName.toUpperCase()===t.toUpperCase()},a=function(e){var t=e.text||e.textContent||e.innerHTML||"",r=i.contentDocument.getElementsByTagName("head")[0]||i.documentElement,a=i.contentDocument.createElement("script");a.type="text/javascript",a.appendChild(document.createTextNode(t)),r.insertBefore(a,r.firstChild),e.parentNode&&e.parentNode.removeChild(e)},n=[],o=t.childNodes,s=i.contentDocument.getElementById("scriptsHolder").childNodes,l=0;s[l];l++)!n||!r(s[l],"script")||s[l].type&&"text/javascript"!==s[l].type.toLowerCase()||n.push(s[l].parentNode?s[l].parentNode.removeChild(s[l]):s[l]);for(var d in n)a(n[d])},r.appendScriptUrl(this.getIframeUrl()+"?"+this.getIframeRequest(a,t)+"&callback="+s+"&parts=1")},getIframeRequest:function(t,i){var r=this.embedSettingsToUrl(i);return r+="&playerId="+t.id,mw.getConfig("debug")&&(r+="&debug=true"),mw.getConfig("Kaltura.KWidgetPsPath")&&(r+="&pskwidgetpath="+mw.getConfig("Kaltura.KWidgetPsPath")),mw.getConfig("Kaltura.AllowIframeRemoteService")&&-1===mw.getConfig("Kaltura.ServiceUrl").indexOf("kaltura.com")&&-1===mw.getConfig("Kaltura.ServiceUrl").indexOf("kaltura.org")&&(r+=e.serviceConfigToUrl()),mw.getConfig("Kaltura.NoApiCache")&&(r+="&nocache=true"),this.isUiConfIdHTML5(i.uiconf_id)&&(r+="&forceMobileHTML5=true"),r+="&urid="+MWEMBED_VERSION},getIframeUrl:function(){var e=this.getPath();return mw.getConfig("Kaltura.ForceIframeEmbed")===!0&&(e=e.replace("localhost","127.0.0.1")),e+"mwEmbedFrame.php"},getPath:function(){return SCRIPT_LOADER_URL.replace("load.php","")},outputIframeWithoutApi:function(e,t){var i=document.getElementById(e),r=this.getIframeUrl()+"?"+this.getIframeRequest(i,t)+"&iframeembed=true",a=document.getElementById(e),n=a.parentNode,o=document.createElement("iframe");o.src=r,o.id=e,o.width=t.width?t.width.replace(/px/,""):"100%",o.height=t.height?t.height.replace(/px/,""):"100%",o.className=a.className?" "+a.className:"",o.style.cssText=a.style.cssText,o.style.border="0px",o.style.overflow="hidden",n.replaceChild(o,a)},addReadyCallback:function(e){for(var t in this.readyWidgets)document.getElementById(t)&&e(t);this.readyCallbacks.push(e),this.proxyJsCallbackready()},rewriteObjectTags:function(){var e=this.getKalutaObjectList(),t=this;if(!e.length)return void this.playerModeChecksDone();if(this.isMissingUiConfJs(e))return void this.loadUiConfJs(e,function(){t.rewriteObjectTags()});var i=mw.getConfig("Kaltura.ServiceUrl");if(mw.getConfig("Kaltura.AllowIframeRemoteService")||i&&-1!==i.indexOf("kaltura.com")||(mw.setConfig("Kaltura.IframeRewrite",!1),mw.setConfig("Kaltura.UseManifestUrls",!1)),this.isHTML5FallForward())return void this.embedFromObjects(e);for(var r=0;r<e.length;r++)this.isUiConfIdHTML5(e[r].kEmbedSettings.uiconf_id)&&this.embedFromObjects([e[r]]);return this.supportsFlash()||this.supportsHTML5()||mw.getConfig("Kaltura.ForceFlashOnDesktop")?void this.playerModeChecksDone():void this.embedFromObjects(e)},uiConfScriptLoadList:{},inLoaderUiConfJsDone:!1,inLoaderUiConfJsCallbackSet:[],inLoaderUiConfJsCallback:function(){for(this.inLoaderUiConfJsDone=!0;this.inLoaderUiConfJsCallbackSet.length;)this.inLoaderUiConfJsCallbackSet.shift()()},isMissingUiConfJs:function(e){if(0==this.inLoaderUiConfJsDone)return!0;if(0==e.length||!mw.getConfig("Kaltura.EnableEmbedUiConfJs")||mw.getConfig("EmbedPlayer.IsIframeServer"))return!1;for(var t=0;t<e.length;t++){var i=e[t].kEmbedSettings;if(!this.uiConfScriptLoadList[i.uiconf_id])return!0}return!1},uiConfScriptLoadListCallbacks:{},loadUiConfJs:function(e,t){var i=this,r=function(){i.inLoaderUiConfJsDone?t():i.inLoaderUiConfJsCallbackSet.push(t)},a=this.getPath()+"services.php?service=uiconfJs";if(mw.getConfig("Kaltura.KWidgetPsPath")&&(a+="&pskwidgetpath="+mw.getConfig("Kaltura.KWidgetPsPath")),!this.isMissingUiConfJs(e))return void r();for(var n=!1,o=0;o<e.length;o++)!function(e){if(!i.uiConfScriptLoadList[e.uiconf_id]){n=!0;var t="kUiConfJs_"+o+"_"+e.uiconf_id;i.uiConfScriptLoadListCallbacks[t]?i.uiConfScriptLoadListCallbacks[t].push(r):(i.uiConfScriptLoadListCallbacks[t]=[r],window[t]=function(){i.uiConfScriptLoadList[e.uiconf_id]=!0;for(var r in i.uiConfScriptLoadListCallbacks[t])i.uiConfScriptLoadListCallbacks[t].hasOwnProperty(r)&&"function"==typeof i.uiConfScriptLoadListCallbacks[t][r]&&i.uiConfScriptLoadListCallbacks[t][r]()},i.appendScriptUrl(a+i.embedSettingsToUrl(e)+"&callback="+t))}}(e[o].kEmbedSettings);return n?void 0:void r()},log:function(e){("undefined"==typeof mw||mw.getConfig("debug"))&&"undefined"!=typeof console&&console.log&&console.log("kWidget: "+e)},supportsHTML5:function(){if(mw.getConfig("EmbedPlayer.DisableVideoTagSupport"))return!1;var e=document.createElement("video");return e.canPlayType?!0:!1},supportsHTMLPlayerUI:function(){return this.supportsHTML5()||this.isIE8()&&this.supportsFlash()},supportsFlash:function(){if(mw.getConfig("EmbedPlayer.DisableHTML5FlashFallback"))return!1;var e=this.getFlashVersion().split(",").shift();return 10>e?!1:!0},getFlashVersion:function(){if(navigator.plugins&&navigator.plugins.length)try{if(navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)return(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(e){}try{try{if("undefined"!=typeof ActiveXObject){var t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");try{t.AllowScriptAccess="always"}catch(e){return"6,0,0"}}}catch(e){}return new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(e){}return"0,0,0"},isIOS:function(){return-1!=navigator.userAgent.indexOf("iPhone")||-1!=navigator.userAgent.indexOf("iPod")||-1!=navigator.userAgent.indexOf("iPad")},isIE:function(){return/\bMSIE\b/.test(navigator.userAgent)},isIE8:function(){return/msie 8/.test(navigator.userAgent.toLowerCase())},isAndroid:function(){return-1!=navigator.userAgent.indexOf("Android ")},isWindowsDevice:function(){var e=navigator.appVersion;return-1!=e.indexOf("Win")&&(-1!=navigator.appVersion.indexOf("Phone")||-1!=navigator.appVersion.indexOf("CE"))},isMobileDevice:function(){return this.isIOS()||this.isAndroid()||this.isWindowsDevice()||mw.getConfig("EmbedPlayer.ForceNativeComponent")},isUiConfIdHTML5:function(e){var t=this.isHTML5FallForward();if(this.userAgentPlayerRules&&this.userAgentPlayerRules[e]){var i=this.checkUserAgentPlayerRules(this.userAgentPlayerRules[e]);"leadWithHTML5"==i.mode&&(t=this.supportsHTMLPlayerUI())}return t},isHTML5FallForward:function(){if(this.isIOS()||mw.getConfig("forceMobileHTML5"))return!0;if((mw.getConfig("KalturaSupport.LeadWithHTML5")||mw.getConfig("Kaltura.LeadWithHTML5"))&&this.supportsHTMLPlayerUI())return!0;if(this.isAndroid())return mw.getConfig("EmbedPlayer.UseFlashOnAndroid")&&e.supportsFlash()?!1:!0;if(e.supportsFlash())return!1;if(mw.getConfig("Kaltura.ForceFlashOnIE10")){var t=navigator.userAgent,i=t.match(/MSIE\s10/);if(i)return!1}return mw.getConfig("Kaltura.ForceFlashOnDesktop")?!1:e.supportsHTML5()?!0:mw.getConfig("Kaltura.IframeRewrite")?!0:!1},getDownloadLink:function(e){var t=this,i=t.getPath(),r=i+"modules/KalturaSupport/download.php/wid/"+e.wid;e.uiconf_id&&(r+="/uiconf_id/"+e.uiconf_id),e.entry_id&&(r+="/entry_id/"+e.entry_id);var a=this.flashVarsToString(e.flashvars),n=e.ks;return r+=n?"/?ks="+n+a:"/?"+a.substr(1,a.length)},getKalturaThumbUrl:function(e){var t="";"100%"!=e.width&&e.width&&(t+="/width/"+parseInt(e.width)),"100%"!=e.height&&e.height&&(t+="/height/"+parseInt(e.height)),e.height||e.width||(t+="/height/480");var i="";e.vid_sec&&(i+="/vid_sec/"+e.vid_sec),e.vid_slices&&(i+="/vid_slices/"+e.vid_slices);var r={};e.ks&&(r.ks=e.ks),e.flashvars&&e.flashvars.ks&&(r.ks=e.flashvars.ks),e.flashvars&&e.flashvars.referenceId&&(r.referenceId=e.flashvars.referenceId),e.p&&!e.partner_id&&(e.partner_id=e.p),!e.partner_id&&e.wid&&(e.partner_id=e.wid.replace("_",""));var a=e.entry_id?"/entry_id/"+e.entry_id:"";return this.getPath()+"modules/KalturaSupport/thumbnail.php/p/"+e.partner_id+"/uiconf_id/"+e.uiconf_id+a+t+i+"?"+this.flashVarsToUrl(r)},getEmbedSettings:function(e,t){var i={};if("string"==typeof t&&(t=this.flashVars2Object(t)),t||(t={}),!e)return{};var r=function(e){return e.replace(/^\s+|\s+$/g,"")};i.flashvars=t;for(var a=e.split("/"),n=null;a.length;){var o=a.pop();switch(o){case"p":i.wid="_"+n,i.p=n;break;case"wid":i.wid=n,i.p=n.replace(/_/,"");break;case"entry_id":i.entry_id=n;break;case"uiconf_id":case"ui_conf_id":i.uiconf_id=n;break;case"cache_st":i.cache_st=n}n=r(o)}for(var s in t){var l=t[s];s=s.toLowerCase(),"entryid"==s&&(i.entry_id=l),"uiconfid"==s&&(i.uiconf_id=l),("widgetid"==s||"widget_id"==s)&&(i.wid=l),("partnerid"==s||"partner_id"==s)&&(i.wid="_"+l,i.p=l),"referenceid"==s&&(i.reference_id=l)}return i.cache_st||(i.cache_st=1),i},flashVars2Object:function(e){for(var t=e?e.split("&"):[],i={},r=0;r<t.length;r++){var a=t[r].split("=");a[0]&&a[1]&&(i[a[0]]=a[1])}return i},flashVarsToString:function(e){var t="";for(var i in e)if("object"==typeof e[i])for(var r in e[i])t+="&"+encodeURIComponent(i)+"."+encodeURIComponent(r)+"="+encodeURIComponent(e[i][r]);else t+="&"+encodeURIComponent(i)+"="+encodeURIComponent(e[i]);return t},flashVarsToUrl:function(e){var t="";for(var i in e)if("jsonConfig"!==i){var r="object"==typeof e[i]?JSON.stringify(e[i]):e[i];t+="&flashvars["+encodeURIComponent(i)+"]="+encodeURIComponent(r)}return t},pageHasAudioOrVideoTags:function(){return mw.getConfig("EmbedPlayer.RewriteSelector")===!1||""==mw.getConfig("EmbedPlayer.RewriteSelector")?!1:0!=document.getElementsByTagName("video").length||0!=document.getElementsByTagName("audio").length?!0:!1},getKalutaObjectList:function(){var e=this,t=[],i=document.getElementsByTagName("object");!i.length&&document.getElementById("kaltura_player")&&(i=[document.getElementById("kaltura_player")]);for(var r=function(r,n){if(!r.match(/(kwidget|kdp)/gi))return!1;var o=e.getEmbedSettings(r,n);return o&&o.uiconf_id&&o.wid?(i[a].kEmbedSettings=o,t.push(i[a]),!0):!1},a=0;a<i.length;a++)if(i[a]){for(var n="",o={},s=i[a].getElementsByTagName("param"),l=0;l<s.length;l++){var d=s[l].getAttribute("name").toLowerCase(),c=s[l].getAttribute("value");("data"==d||"src"==d||"movie"==d)&&(n=c),"flashvars"==d&&(o=this.flashVars2Object(c))}r(n,o)||!i[a].getAttribute("data")||!r(i[a].getAttribute("data"),o)}return t},jQueryLoadCheck:function(e){window.jQuery&&mw.versionIsAtLeast("1.7.2",window.jQuery.fn.jquery)?(window.kalturaJQuery=window.jQuery,e(window.jQuery,window.jQuery)):(window.jQuery&&(window.clientPagejQuery=window.jQuery.noConflict(),window.$=window.clientPagejQuery),this.appendScriptUrl(this.getPath()+"resources/jquery/jquery.min.js",function(){window.kalturaJQuery=window.jQuery.noConflict(),window.clientPagejQuery&&(window.jQuery=window.$=window.clientPagejQuery),e(window.kalturaJQuery,window.kalturaJQuery)}))},extend:function(e){for(var t=Array.prototype.slice.call(arguments,1),i=0;i<t.length;i++){var r=t[i];if(r)for(var a in r)r[a]&&r[a].constructor===Object?e[a]&&e[a].constructor!==Object?e[a]=r[a]:(e[a]=e[a]||{},this.extend(e[a],r[a])):e[a]=r[a]}return e},param:function(e){var t="",i="";for(var r in e)t+=i+r+"="+encodeURIComponent(e[r]),i="&";return t},appendScriptUrls:function(t,i){e.log("appendScriptUrls");var r=this,a=0;if(0==t.length)return void(i&&i());for(var n=0;n<t.length;n++)!function(e){r.appendScriptUrl(t[e],function(){a++,a==t.length&&i&&i()})}(n)},appendScriptUrl:function(e,t,i,r){i||(i=window.document);var a=i.getElementsByTagName("head")[0]||i.documentElement,n=i.createElement("script");n.src=e;var o=!1;n.onload=n.onerror=n.onreadystatechange=function(){o||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(o=!0,arguments&&arguments[0]&&arguments[0].type&&"error"==arguments[0].type?"function"==typeof r&&r():"function"==typeof t&&t(),n.onload=n.onerror=n.onreadystatechange=null,a&&n.parentNode&&a.removeChild(n))},a.insertBefore(n,a.firstChild)},appendCssUrl:function(e,t){t=t||document;var i=t.getElementsByTagName("head")[0],r=t.createElement("link");r.setAttribute("rel","stylesheet"),r.setAttribute("type","text/css"),r.setAttribute("href",e),i.appendChild(r)},serviceConfigToUrl:function(){for(var e=["ServiceUrl","CdnUrl","ServiceBase","UseManifestUrls"],t="",i=0;i<e.length;i++)null!==mw.getConfig("Kaltura."+e[i])&&(t+="&"+e[i]+"="+encodeURIComponent(mw.getConfig("Kaltura."+e[i])));return t},addEvent:function(e,t,i,r){e.attachEvent?(e["e"+t+i]=i,e[t+i]=function(){e["e"+t+i](window.event)},e.attachEvent("on"+t,e[t+i])):e.addEventListener(t,i,!!r)},removeEvent:function(e,t,i){e.detachEvent?(e.detachEvent("on"+t,e[t+i]),e[t+i]=null):e.removeEventListener(t,i,!1)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},embedSettingsToUrl:function(e){var t="",i=["uiconf_id","entry_id","wid","p","cache_st"];for(var r in e)for(var a=0;a<i.length;a++)i[a]==r&&(t+="&"+r+"="+encodeURIComponent(e[r]));return t+=this.flashVarsToUrl(e.flashvars)},overrideFlashEmbedMethods:function(){var t=this,i=function(t,i,r,a){r&&(t.width=r),a&&(t.height=a),e.embed(i,t)};if(window.flashembed&&!window.originalFlashembed){window.originalFlashembed=window.flashembed,window.flashembed=function(r,a,n){t.domReady(function(){var t=e.getEmbedSettings(a.src,n);return!t.uiconf_id||!e.isHTML5FallForward()&&e.supportsFlash()?originalFlashembed(r,a,n):(document.getElementById(r).innerHTML='<div style="width:100%;height:100%" id="'+a.id+'"></div>',void i(t,a.id,a.width,a.height))})};for(var r=["asString","getHTML","getVersion","isSupported"],a=0;a<r.length;a++)window.flashembed[r[a]]=originalFlashembed}window.SWFObject&&!window.SWFObject.prototype.originalWrite&&(window.SWFObject.prototype.originalWrite=window.SWFObject.prototype.write,window.SWFObject.prototype.write=function(r){var a=this;t.domReady(function(){var t=e.getEmbedSettings(a.attributes.swf,a.params.flashVars);!t.uiconf_id||!e.isHTML5FallForward()&&e.supportsFlash()?a.originalWrite(r):i(t,r,a.attributes.width,a.attributes.height)})}),window.swfobject&&!window.swfobject.originalEmbedSWF&&(window.swfobject.originalEmbedSWF=window.swfobject.embedSWF,window.swfobject.embedSWF=function(r,a,n,o,s,l,d,c,u,f){t.domReady(function(){var t=e.getEmbedSettings(r,d);!t.uiconf_id||!e.isHTML5FallForward()&&e.supportsFlash()?window.swfobject.originalEmbedSWF(r,a,n,o,s,l,d,c,u,f):i(t,a,n,o)})})}};window.KWidget=e,window.kWidget=e}}(),this.JSON||(this.JSON={}),function(){function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var i,r,a,n,o=gap,s,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(l)){for(n=l.length,i=0;n>i;i+=1)s[i]=str(i,l)||"null";return a=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+o+"]":"["+s.join(",")+"]",gap=o,a}if(rep&&"object"==typeof rep)for(n=rep.length,i=0;n>i;i+=1)r=rep[i],"string"==typeof r&&(a=str(r,l),a&&s.push(quote(r)+(gap?": ":":")+a));else for(r in l)Object.hasOwnProperty.call(l,r)&&(a=str(r,l),a&&s.push(quote(r)+(gap?": ":":")+a));return a=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+o+"}":"{"+s.join(",")+"}",gap=o,a}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,i){var r;if(gap="",indent="","number"==typeof i)for(r=0;i>r;r+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var i,r,a=e[t];if(a&&"object"==typeof a)for(i in a)Object.hasOwnProperty.call(a,i)&&(r=walk(a,i),void 0!==r?a[i]=r:delete a[i]);return reviver.call(e,t,a)}var j;if(cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(e,t){t.deprecatedGlobals=function(){var e={kIsIOS:"isIOS",kSupportsHTML5:"supportsHTML5",kGetFlashVersion:"getFlashVersion",kSupportsFlash:"supportsFlash",kalturaIframeEmbed:"embed",kOutputFlashObject:"outputFlashObject",kIsHTML5FallForward:"isHTML5FallForward",kIframeWithoutApi:"outputIframeWithoutApi",kDirectDownloadFallback:"outputDirectDownload",kGetKalturaEmbedSettings:"getEmbedSetting",kGetKalturaPlayerList:"getKalutaObjectList",kCheckAddScript:"rewriteObjectTags",kAddScript:"loadHTML5Lib",kPageHasAudioOrVideoTags:"pageHasAudioOrVideoTags",kLoadJsRequestSet:"loadRequestSet",kOverideJsFlashEmbed:"overrideFlashEmbedMethods",kDoIframeRewriteList:"embedFromObjects",kEmbedSettingsToUrl:"embedSettingsToUrl",kGetAdditionalTargetCss:"getAdditionalTargetCss",kAppendCssUrl:"appendCssUrl",kAppendScriptUrl:"appendScriptUrl",kFlashVars2Object:"flashVars2Object",kFlashVarsToUrl:"flashVarsToUrl",kFlashVarsToString:"flashVarsToString",kServiceConfigToUrl:"serviceConfigToUrl",kRunMwDomReady:"rewriteObjectTags",restoreKalturaKDPCallback:!1};
for(var i in e)!function(i){window[i]=function(){if(e[i]===!1)return void t.log(i+" is deprecated. This method no longer serves any purpose.");t.log(i+" is deprecated. Please use kWidget."+e[i]);var r=Array.prototype.slice.call(arguments,0);return"function"!=typeof t[e[i]]?void t.log("Error kWidget missing method: "+e[i]):t[e[i]].apply(t,r)}}(i)},t.deprecatedGlobals()}(window.mw,window.kWidget),function(e){function t(){if(!l&&(l=!0,d)){for(var e=0;e<d.length;e++)d[e].call(window,[]);d=[]}}function i(e){var t=window.onload;window.onload="function"!=typeof window.onload?e:function(){t&&t(),e()}}function r(){if(!s){if(s=!0,document.addEventListener&&!o.opera&&document.addEventListener("DOMContentLoaded",t,!1),o.msie&&window==top&&function(){if(!l){try{document.documentElement.doScroll("left")}catch(e){return void setTimeout(arguments.callee,0)}t()}}(),o.opera&&document.addEventListener("DOMContentLoaded",function(){if(!l){for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].disabled)return void setTimeout(arguments.callee,0);t()}},!1),o.safari){var e;!function(){if(!l){if("loaded"!=document.readyState&&"complete"!=document.readyState)return void setTimeout(arguments.callee,0);if(void 0===e){for(var i=document.getElementsByTagName("link"),r=0;r<i.length;r++)"stylesheet"==i[r].getAttribute("rel")&&e++;var a=document.getElementsByTagName("style");e+=a.length}return document.styleSheets.length!=e?void setTimeout(arguments.callee,0):void t()}}()}i(t)}}var a=window.DomReady={},n=navigator.userAgent.toLowerCase(),o={version:(n.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[])[1],safari:/webkit/.test(n),opera:/opera/.test(n),msie:/msie/.test(n)&&!/opera/.test(n),mozilla:/mozilla/.test(n)&&!/(compatible|webkit)/.test(n)},s=!1,l=!1,d=[];a.ready=function(e,t){r(),l||/loaded|complete/.test(document.readyState)?e.call(window,[]):d.push(function(){return e.call(window,[])})},r(),e.domReady=a.ready}(window.kWidget);var logIfInIframe="undefined"!=typeof preMwEmbedConfig&&preMwEmbedConfig["EmbedPlayer.IsIframeServer"]?" ( iframe ) ":"";kWidget.log("Kaltura HTML5 Version: "+MWEMBED_VERSION+logIfInIframe),window.mw||(window.mw={}),window.preMwEmbedReady||(window.preMwEmbedReady=[]),window.preMwEmbedConfig||(window.preMwEmbedConfig={}),mw.setConfig||(mw.setConfig=function(e,t){var i={};if("undefined"!=typeof t)window.preMwEmbedConfig[e]=t;else if("object"==typeof e)for(var r in e)window.preMwEmbedConfig[r]=e[r]}),mw.getConfig||(mw.getConfig=function(e,t){return"undefined"==typeof window.preMwEmbedConfig[e]?"undefined"!=typeof t?t:null:window.preMwEmbedConfig[e]}),mw.versionIsAtLeast||(mw.versionIsAtLeast=function(e,t){"undefined"==typeof t&&(t=window.MWEMBED_VERSION),e=e.replace(/[^\d.-]/g,""),t=t.replace(/[^\d.-]/g,"");for(var i=e.split("."),r=t.split("."),a=0;a<i.length;a++){if(parseInt(r[a])>parseInt(i[a]))return!0;if(parseInt(r[a])<parseInt(i[a]))return!1}return!0}),mw.ready||(mw.ready=function(e){window.preMwEmbedReady.push(e)}),mw.getKalturaThumbUrl=function(e){return kWidget.log("mw.getKalturaThumbUrl is deprecated. Please use kWidget.getKalturaThumbUrl"),kWidget.getKalturaThumbUrl(e)},kWidget.getUserAgentPlayerRulesMsg=function(e){return kWidget.checkUserAgentPlayerRules(e,!0)},kWidget.addUserAgentRule=function(e,t,i){var r=0;if(kWidget.userAgentPlayerRules[e])for(r in kWidget.userAgentPlayerRules[e].rules);else kWidget.userAgentPlayerRules[e]={rules:{},actions:{}};var a=parseInt(r)+1;kWidget.userAgentPlayerRules[e].rules[a]={regMatch:t},kWidget.userAgentPlayerRules[e].actions[a]={mode:i,val:1}},kWidget.checkUserAgentPlayerRules=function(e,t){var i=mw.getConfig("KalturaSupport_ForceUserAgent")?mw.getConfig("KalturaSupport_ForceUserAgent"):navigator.userAgent,r={mode:"flash",val:!0};if(!e.rules)return r;var a=function(t){return e.actions&&e.actions[t]?e.actions[t]:r};for(var n in e.rules){var o=e.rules[n];if(o.match){if(-1!==i.indexOf(o.match))return a(n)}else if(o.regMatch){var s=o.regMatch.replace(/(^\/)|(\/$)/g,"");if(new RegExp(s).test(i))return a(n)}}return r},function(e){e.seconds2npt=function(t,i){if(isNaN(t))return e.log("Warning: mediawiki.UtilitiesTime, trying to get npt time on NaN:"+t),"0:00:00";var r=e.seconds2Measurements(t);return r.seconds=i?Math.round(1e3*r.seconds)/1e3:Math.round(r.seconds),r.seconds<10&&(r.seconds="0"+r.seconds),0==r.hours?hoursStr="":(r.minutes<10&&(r.minutes="0"+r.minutes),hoursStr=r.hours+":"),hoursStr+r.minutes+":"+r.seconds},e.npt2seconds=function(e){if(!e)return 0;e=e.replace(/npt:|s/g,"");var t=0,i=0,r=0,a=e.split(":");return 3==a.length?(r=a[2],i=a[1],t=a[0]):2==a.length?(r=a[1],i=a[0]):r=a[0],r=r.replace(/,\s?/,"."),parseInt(3600*t)+parseInt(60*i)+parseFloat(r)},e.seconds2Measurements=function(e){var t={};return t.days=Math.floor(e/86400),t.hours=Math.floor(Math.round(e)/3600),t.minutes=Math.floor(Math.round(e)/60%60),t.seconds=Math.round(e)%60,t},e.getSliceCount=function(e){return 60>e?Math.round(e)+1:120>e?Math.round(e/1.5)+1:240>e?Math.round(e/2)+1:200},e.getThumbSpriteOffset=function(t,i,r,a){var n=e.getSliceIndexForTime(i,r,a);return-(n*t)+"px 0px"},e.getSliceIndexForTime=function(e,t,i){var r=i||this.getSliceCount(t),a=e/t,n=Math.ceil(r*a);return n}}(window.kWidget),function(e){"use strict";e||(e=window.kWidget={}),e.api=function(e){return this.init(e)},e.api.prototype={ks:null,type:"auto",baseParam:{apiVersion:"3.1",expiry:"86400",clientTag:"kwidget:v"+window.MWEMBED_VERSION,format:9,ignoreNull:1},init:function(e){for(var t in e)this[t]=e[t];this.serviceUrl||(this.serviceUrl=mw.getConfig("Kaltura.ServiceUrl")),this.serviceBase||(this.serviceBase=mw.getConfig("Kaltura.ServiceBase")),this.statsServiceUrl||(this.statsServiceUrl=mw.getConfig("Kaltura.StatsServiceUrl")),"undefined"==typeof this.disableCache&&(this.disableCache=mw.getConfig("Kaltura.NoApiCache"))},setKs:function(e){this.ks=e},getKs:function(){return this.ks},doRequest:function(t,i){var r=this,a={};this.disableCache===!0&&(a.nocache="true");for(var n in this.baseParam)"undefined"==typeof a[n]&&(a[n]=this.baseParam[n]);"user"!=t.service?e.extend(a,this.handleKsServiceRequest(t)):e.extend(a,t),a.kalsig=this.hashCode(e.param(a));var o=a.service;delete a.service;var s=function(e){e=e||[],2==e.length&&"session"==a["1:service"]&&(e=e[1]),i&&(i(e),i=null)};try{a.format=1,this.xhrRequest(r.getApiUrl(o),a,function(e){s(e)})}catch(l){a.format=9;var d=r.getApiUrl(o)+"&"+e.param(a),c="kapi_"+Math.abs(r.hashCode(e.param(a)));window[c]&&(this.callbackIndex++,c+=this.callbackIndex),window[c]=function(e){s(e),window[c]=void 0;try{delete window[c]}catch(t){}},d+="&callback="+c,e.appendScriptUrl(d)}},xhrRequest:function(t,i,r){var a="auto"==this.type?e.param(i).length>2e3?"xhrPost":"xhrGet":"GET"==this.type?"xhrGet":"xhrPost";this[a](t,i,r)},xhrGet:function(t,i,r){var a=new XMLHttpRequest;a.onreadystatechange=function(){4==a.readyState&&200==a.status&&r(JSON.parse(a.responseText))},a.open("GET",t+"&"+e.param(i),!0),a.send()},xhrPost:function(t,i,r){var a=new XMLHttpRequest;a.onreadystatechange=function(){4==a.readyState&&200==a.status&&r(JSON.parse(a.responseText))},a.open("POST",t,!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.send(e.param(i))},handleKsServiceRequest:function(e){var t={};if(e.ks&&(this.ks=e.ks),e.length||this.getKs()||(e=[e]),e.length){t.service="multirequest",t.action="null";var i=1;this.getKs()||(t[i+":service"]="session",t[i+":action"]="startWidgetSession",t[i+":widgetId"]=this.wid,i=2);for(var r=0;r<e.length;r++){var a=i+r;t[a+":ks"]=this.getKs()?this.getKs():"{1:result:ks}";for(var n in e[r])if("object"==typeof e[r][n])for(var o in e[r][n])t[a+":"+n+":"+o]=e[r][n][o];else t[a+":"+n]=e[r][n]}}else t=e,t.ks=this.getKs();return t},getApiUrl:function(e){var t=this.serviceUrl;return e&&"stats"==e&&this.statsServiceUrl&&(t=this.statsServiceUrl),t+this.serviceBase+e},hashCode:function(e){var t=0;if(0==e.length)return t;for(var i=0;i<e.length;i++){var r=e.charCodeAt(i);t=(t<<5)-t+r,t&=t}return t}}}(window.kWidget),mw.setConfig("debug",!1),mw.setConfig("Mw.XmlProxyUrl","http://cdnapi.kaltura.com/html5/html5lib/v2.20/simplePhpXMLProxy.php"),mw.setConfig("Kaltura.UseManifestUrls",!0),mw.setConfig("Kaltura.Protocol","http"),mw.setConfig("Kaltura.ServiceUrl","http://cdnapi.kaltura.com"),mw.setConfig("Kaltura.ServiceBase","/api_v3/index.php?service="),mw.setConfig("Kaltura.CdnUrl","http://cdnbakmi.kaltura.com"),mw.setConfig("Kaltura.StatsServiceUrl","http://stats.kaltura.com"),mw.setConfig("Kaltura.LiveStatsServiceUrl",""),mw.setConfig("Kaltura.IframeRewrite",!0),mw.setConfig("EmbedPlayer.EnableIpadHTMLControls",!0),mw.setConfig("EmbedPlayer.UseFlashOnAndroid",!0),mw.setConfig("Kaltura.LoadScriptForVideoTags",!0),mw.setConfig("Kaltura.AllowIframeRemoteService",!0),mw.setConfig("Kaltura.UseAppleAdaptive",!0),mw.setConfig("Kaltura.EnableEmbedUiConfJs",!1),mw.setConfig("Kaltura.PageGoogleAalytics",!1),mw.setConfig("Kaltura.UserLanguage",{"en-US":1,en:"0.8"}),kWidget.inLoaderUiConfJsCallback(),kWidget.setup(),window.kWidget||(window.kWidget={}),function(e){e.getSources=function(t){var i=new e.api({wid:"_"+t.partnerId,serviceUrl:"https://cdnapisec.kaltura.com"});i.doRequest([{contextDataParams:{referrer:document.URL,objectType:"KalturaEntryContextDataParams",flavorTags:"all"},service:"baseentry",entryId:t.entryId,action:"getContextData"},{service:"baseentry",action:"get",version:"-1",entryId:t.entryId},{service:"caption_captionasset",action:"list","filter:entryIdEqual":t.entryId}],function(e){var r=i.ks,a=[],n=[],o=[],s=location.protocol.substr(0,location.protocol.length-1),l;l="https"==s?"https://cdnapisec.kaltura.com":"http://cdnbakmi.kaltura.com";var d=l+"/p/"+t.partnerId+"/sp/"+t.partnerId+"00/playManifest";for(var c in e[1].flavorAssets){var u=e[1].flavorAssets[c];if(2==u.status){var f={"data-width":u.width,"data-height":u.height,flavorParamsId:u.flavorParamsId,flavorId:u.id},p=d+"/entryId/"+u.entryId;-1==u.tags.indexOf("applembr")?(p+="/flavorId/"+u.id+"/format/url/protocol/http",-1!=u.tags.toLowerCase().indexOf("ipad")&&(f.src=p+"/a.mp4",f.type="video/mp4"),-1!=u.tags.toLowerCase().indexOf("iphone")&&(f.src=p+"/a.mp4",f.type="video/mp4"),487081===u.flavorParamsId&&(f.src=p+"/a.mp4",f.type="video/mp4"),u.fileExt&&("ogg"==u.fileExt.toLowerCase()||"ogv"==u.fileExt.toLowerCase()||u.containerFormat&&"ogg"==u.containerFormat.toLowerCase())&&(f.src=p+"/a.ogg",f.type="video/ogg"),("webm"==u.fileExt||-1!=u.tags.indexOf("webm")||u.containerFormat&&"matroska"==u.containerFormat.toLowerCase()||u.containerFormat&&"webm"==u.containerFormat.toLowerCase())&&(f.src=p+"/a.webm",f.type="video/webm"),"3gp"==u.fileExt&&(f.src=p+"/a.3gp",f.type="video/3gp"),f.src&&o.push(f),-1!=u.tags.toLowerCase().indexOf("ipadnew")&&a.push(u.id),-1!=u.tags.toLowerCase().indexOf("iphonenew")&&n.push(u.id)):(p+="/format/applehttp/protocol/"+s+"/a.m3u8",o.push({type:"application/vnd.apple.mpegurl",src:p}))}}0!=a.length&&o.push({type:"application/vnd.apple.mpegurl",src:d+"/entryId/"+u.entryId+"/flavorIds/"+a.join(",")+"/format/applehttp/protocol/"+s+"/a.m3u8"}),0!=n.length&&o.push({type:"application/vnd.apple.mpegurl",src:d+"/entryId/"+u.entryId+"/flavorIds/"+n.join(",")+"/format/applehttp/protocol/"+s+"/a.m3u8"}),t.callback&&t.callback({poster:e[2].thumbnailUrl,duration:e[2].duration,name:e[2].name,entryId:e[2].id,captionId:e[3].totalCount>0?e[3].objects[0].id:null,sources:o})})}}(window.kWidget);/*
 * Storybook Plus
 *
 * @author: Ethan Lin
 * @url: https://github.com/oel-mediateam/sbplus
 * @version: 2.5.8
 * Released Wednesday, November 5, 2014
 *
 * @license: The MIT License (MIT)
 * Copyright (c) 2014 UW-EX CEOEL
 *
 */
var topicCount=0,counter=0,previousIndex=0,tocIndex=0,noteArray,topicSrc,topicTitle,imgPath,slideImgFormat="png",media="Slide",enabledNote=!1,version,imgCaption,questions,quizDetected=!1,PROFILE,lessonTitle,instructor,duration,videoPlayer=null,audioPlayer,firstAudioLoad=!1,audioPlaying=!1,sources,ROOT_PATH="https://media.uwex.edu/content/media/storybook_plus_v2/",tech=navigator.userAgent,IS_CHROME=/Chrome/i.test(tech),IS_WINDOWS=/Windows/i.test(tech);$(document).ready(function(){$.fn.getLessonContent("assets/topic.xml")}),$.fn.getLessonContent=function(e){$.ajaxSetup({url:e,type:"GET",dataType:"xml",accepts:"xml",content:"xml",contentType:'xml; charset="utf-8"',cache:!1}),$.ajax({encoding:"UTF-8",beforeSend:function(e){e.overrideMimeType("xml; charset=utf-8"),e.setRequestHeader("Accept","text/xml")},success:function(e){$.fn.parseContent(e)},error:function(e,t){$.fn.displayGetLessonError(e.status,t)}})},$.fn.parseContent=function(e){var t=$(e),i=t.find("setup"),r=t.find("topic"),a=$.fn.stripScript(i.find("lesson").text()),n=$.trim(i.find("instructor").text()),o=$.fn.stripScript(i.find("length").text()),s=$.fn.stripScript(i.find("note").text()),l=$.fn.stripScript(i.find("slideImgFormat").text());PROFILE=$.fn.stripScript(t.find("profile").text()),lessonTitle="Lesson name is not specified.",instructor="Instructor name is not specified.",duration="",a.length&&(lessonTitle=a),n.length&&(instructor=n),o.length&&(duration=o),s.length&&("yes"===s||"y"===s)&&(enabledNote=!0),l.length&&(slideImgFormat=l),topicSrc=[],topicTitle=[],noteArray=[],questions=[],r.each(function(){if(topicTitle[topicCount]=$.trim($(this).attr("title")),topicSrc[topicCount]=$.trim($(this).attr("src")),enabledNote&&(noteArray[topicCount]=$.fn.stripScript($(this).find("note").text())),"quiz"===topicSrc[topicCount]){var e=$.fn.stripScript(t.find("topic:eq("+topicCount+")").find("quiz").find("question").text()),i=$.trim(t.find("topic:eq("+topicCount+")").find("quiz").find("question").attr("img")),r=$.trim(t.find("topic:eq("+topicCount+")").find("quiz").find("question").attr("audio")),a=$.fn.stripScript(t.find("topic:eq("+topicCount+")").find("quiz").find("choice").text()),n=$.trim(t.find("topic:eq("+topicCount+")").find("quiz").find("choice").attr("useImg")),o=$.fn.stripScript(t.find("topic:eq("+topicCount+")").find("quiz").find("wrongFeedback").text()),s=$.fn.stripScript(t.find("topic:eq("+topicCount+")").find("quiz").find("correctFeedback").text()),l=$.trim(t.find("topic:eq("+topicCount+")").find("quiz").attr("type")),d=$.fn.stripScript(t.find("topic:eq("+topicCount+")").find("quiz").find("answer").text()),c={};quizDetected=!0,c.id=topicCount,c.type=l,c.question=e,c.img=""!==i?i:"",c.audio=""!==r?r:"",c.choiceImg=""!==n?n:"",a?(c.choice=$.fn.splitSelections(a),c.wrongFeedback=$.fn.splitSelections(o)):c.wrongFeedback=o,c.answer=$.fn.splitSelections(d),c.stuAnswer="",c.correct=!1,c.correctFeedback=s,c.taken=!1,questions.push(c)}++topicCount}),$.fn.setupPlayer()},$.fn.setupPlayer=function(){var e=$.fn.getDirectory(),t;if(version=void 0===$("#storybook_plus_wrapper").attr("data-version")?"":$("#storybook_plus_wrapper").attr("data-version").replace(/\./g,""),$(document).attr("title",lessonTitle),$("#errorMsg").hide(),$.each(topicSrc,function(e){var t=topicSrc[e].substring(0,topicSrc[e].indexOf(":")+1);return"video:"!==t&&"youtube:"!==t&&"vimeo:"!==t&&"kaltura:"!==t?(media="Slide",!1):void(media="Video")}),enabledNote===!1&&quizDetected===!1&&230>version)$("#storybook_plus_wrapper").addClass("noteDisabled");else if(enabledNote===!1&&quizDetected===!0||version>=230){var i=$.fn.getProgramDirectory(),r='<img src="'+ROOT_PATH+'sources/img/uw_ex_ceoel_logo.svg" width="250" height="108" alt="University of Wisconsin-Extension Division of Continuing Education, Outreach &amp; E-Learning" border="0" />';switch($("#storybook_plus_wrapper").addClass("withQuiz"),i){case"smgt":r='<img src="'+ROOT_PATH+'sources/img/uw_smgt_logo.svg" width="250" height="108" alt="University of Wisconsin Sustainable Management" border="0" />';break;case"hwm":r='<img src="'+ROOT_PATH+'sources/img/uw_hwm_logo.svg" width="250" height="108" alt="University of Wisconsin Health &amp; Wellness Management" border="0" />';break;case"himt":r='<img src="'+ROOT_PATH+'/sources/img/uw_himt_logo.svg" width="250" height="108" alt="University of Wisconsin Health Information Management &amp; Technology" border="0" />';break;case"il":r='<img src="'+ROOT_PATH+'sources/img/uw_il_logo.svg" width="250" height="108" alt="University of Wisconsin Independent Learning" border="0" />';break;case"flx":r='<img src="'+ROOT_PATH+'sources/img/uw_flx_logo.svg" width="250" height="108" alt="University of Wisconsin Flexible Option" border="0" />';break;case"bps":r='<img src="'+ROOT_PATH+'sources/img/uw_bps_logo.svg" width="250" height="108" alt="University of Wisconsin Bachelor of Professional Studies in Organization Leadership and Communication" border="0" />'}enabledNote===!1&&$("#note").addClass("noNotes").html('<div class="logo">'+r+"</div>")}$.each(topicTitle,function(e){t="quiz"===topicSrc[e]?' <span class="icon-assessement light"></span>':"",$("#selectable").append('<li class="ui-widget-content" title="'+topicTitle[e]+'"><div class="slideNum">'+$.fn.addLeadingZero(e+1)+'.</div><div class="title">'+topicTitle[e]+t+"</div></li>")}),$("#splash_screen").css("background-image","url(assets/splash.jpg)"),$("#splash_screen").append("<p>"+lessonTitle+"</p><p>"+instructor+"</p>"+(0!==duration?"<p><small>"+duration+"</small></p>":"")+'<a class="playBtn" href="#"></a>'),$("#splash_screen, #playBtn").on("click",function(){return $.fn.initializePlayer(),!1}),$.fn.getDownloadableFile(e,"mp3","audio/mpeg"),$.fn.getDownloadableFile(e,"pdf","application/pdf")},$.fn.initializePlayer=function(){$("#splash_screen").hide(),$("#lessonTitle").attr("title",lessonTitle),$("#lessonTitle").html(lessonTitle),$("#instructorName").html('<a class="instructorName" href="#">'+instructor+"</a>"),$("#profile .photo").before('<div class="profileCloseBtn"><a id="profileClose" href="#">&times;</a></div>'),$("#profile .bio").html("<h2>"+instructor+"</h2>"+PROFILE),$("#player").append('<div id="progressing"></div>'),$("#info, a.instructorName, #profileClose").on("click",function(){return $("#profile").is(":visible")?$("#profile").fadeOut(300):$("#profile").fadeIn(300),!1}),$("#selectable li:first").addClass("ui-selected"),$("#selectable").selectable({stop:function(){tocIndex=Number($(".ui-selected .slideNum").html().replace(".",""))-1,tocIndex!==previousIndex&&($.fn.loadSlide(topicSrc[tocIndex],tocIndex),previousIndex=tocIndex)}}),$("#leftBtn").on("click",function(){return counter--,0>counter&&(counter=topicCount-1),$.fn.loadSlide(topicSrc[counter],counter),previousIndex=counter,!1}),$("#rightBtn").on("click",function(){return counter++,counter>topicCount-1&&(counter=0),$.fn.loadSlide(topicSrc[counter],counter),previousIndex=counter,!1}),(enabledNote===!0||quizDetected===!0||version>=230)&&($("#control").append('<span id="magnifyBtn"><span class="icon-expand" title="Expand"></span></span>'),$("#magnifyBtn").before($("#storybook_plus_wrapper").hasClass("withQuiz")?'<span id="tocBtn"><span class="toc" title="Toggle Table of Contents"></span></span>':'<span id="notesBtn"><span class="notes" title="Toggle Notes"></span></span><span id="tocBtn"><span class="toc" title="Toggle Table of Contents"></span></span>'),$.fn.bindImgMagnify(),$.fn.bindNoteSlideToggle(),$.fn.bindTocSlideToggle()),$.fn.loadSlide(topicSrc[0],counter),$.fn.loadProfilePhoto(),$("#player").show()},$.fn.loadSlide=function(e,t){var i,r=e.substring(e.indexOf(":")+1);if("quiz"!==e&&(e=e.substring(0,e.indexOf(":")+1),"kaltura:"===e&&1!==r.split(":").length&&(r=r.split(":"))),"video:"!==e&&"kaltura:"!==e&&"youtube:"!==e&&"vimeo:"!==e&&$("#progressing").fadeIn(),$("#slideNote").hasClass("quizSlide")&&$("#slideNote").removeClass("quizSlide"),null!==videoPlayer&&(videoPlayer.dispose(),videoPlayer=null,$("#vp").empty().hide()),audioPlaying){try{audioPlayer.pause()}catch(a){}$("#ap").hide(),audioPlaying=!1}switch($("#slide").html(""),e){case"image:":i=new Image,imgPath="assets/slides/"+r+"."+slideImgFormat,imgCaption=$("#selectable li .title").get(t).innerHTML,$(i).load(function(){$(this).hide(),$("#slide").html('<div id="img"></div>'),$("#slide #img").html(i),$(this).fadeIn(),$("#progressing").fadeOut()}).error(function(){$.fn.displayErrorMsg("image not found!","Expected image: "+imgPath)}).attr({src:imgPath,border:0});break;case"image-audio:":i=new Image,imgPath="assets/slides/"+r+"."+slideImgFormat,imgCaption=$("#selectable li .title").get(t).innerHTML,$(i).load(function(){$(this).hide(),$("#slide").html('<div id="img"></div>'),$("#slide #img").html(i),$(this).fadeIn(),$("#progressing").fadeOut(),audioPlaying||($.fn.fileExists("assets/audio/"+r,"mp3","audio/mpeg")?($("#ap").show(),firstAudioLoad!==!0?($.fn.loadAudioPlayer("#apc",r),firstAudioLoad=!0):(sources=[{src:"assets/audio/"+r+".mp3",type:"audio/mpeg"}],audioPlayer.setSrc(sources))):$.fn.displayErrorMsg("audio file not found!","Expected file: assets/audio/"+r+".mp3"),audioPlaying=!0)}).error(function(){$.fn.displayErrorMsg("image not found!","Expected image: "+imgPath)}).attr({src:imgPath,border:0});break;case"video:":$.fn.setupVideoPlayer("video",r);break;case"youtube:":$("#slide").html('<iframe width="640" height="360" src="https://www.youtube.com/embed/'+r+'?modestbranding=1&theme=light&color=white&showinfo=0&autoplay=1&controls=2&fs=0&html5=1&autohide=1&rel=0&iv_load_policy=3" frameborder="0"></iframe>').promise().done();break;case"vimeo:":$("#slide").html('<iframe width="640" height="360" src="//player.vimeo.com/video/'+r+'?portrait=0&color=ffffff&autoplay=1&fullscreen=0" frameborder="0"></iframe>').promise().done();break;case"kaltura:":$.fn.setupVideoPlayer("kaltura",r);break;case"swf:":$("#slide").html('<object width="640" height="360" type="application/x-shockwave-flash" data="assets/swf/'+r+'.swf"><param name="movie" value="assets/swf/'+r+'.swf" /><div id="errorMsg"><p>Error: Adobe Flash Player is not enabled or installed!</p><p>Adobe Flash Player is required to view this slide. Please enable or <a href="http://get.adobe.com/flashplayer/" target="_blank">install Adobe Flash Player</a>.</p></div></object>').promise().done(function(){$("#progressing").fadeOut()});break;case"quiz":$("#slideNote").addClass("quizSlide"),$.fn.setupQuiz(t),$("#progressing").fadeOut();break;default:$.fn.displayErrorMsg("unknow slide type!","Please double check the XML file.")}enabledNote&&$(this).loadNote(t),$(this).updateSlideNum(t)},$.fn.setupVideoPlayer=function(e,t){var i="vpc";switch(e){case"video":var r=$.fn.fileExists("assets/video/"+t,"vtt","text/vtt")?'<track kind="subtitles" src="assets/video/'+t+'.vtt" srclang="en" label="English">':"",a='<source src="assets/video/'+t+'.mp4" type="video/mp4" />';$("#vp").html('<video id="'+i+'" class="video-js vjs-default-skin">'+a+r+"</video>").promise().done(function(){$("#progressing").fadeOut(),$.fn.loadVideoJsPlayer(i)});break;case"kaltura":var n,o,s,l,d={},c;kWidget.getSources({partnerId:1660872,entryId:t,callback:function(e){n=e.entryId,o=e.captionId,s=e.captionExt,l=e.captionLang;for(var t in e.sources){var r=e.sources[t];487061===r.flavorParamsId&&(d.low=r.src),487071===r.flavorParamsId&&(d.normal=r.src),487081===r.flavorParamsId&&(d.high=r.src),487111===r.flavorParamsId&&(d.webm=r.src)}c='<video id="'+i+'" class="video-js vjs-default-skin">',void 0!==d.low&&(c+='<source src="'+d.low+'" type="video/mp4" data-res="low" />'),c+='<source src="'+d.normal+'" type="video/mp4" data-res="normal" data-default="true" />',void 0!==d.low&&(c+='<source src="'+d.high+'" type="video/mp4" data-res="high" />'),void 0!==d.webm&&$.fn.supportWebm()&&(c+='<source src="'+d.webm+'" type="video/webm" />'),null!==o&&(c+='<track kind="subtitles" src="https://cdnapisec.kaltura.com/api_v3/index.php/service/caption_captionAsset/action/serve/captionAssetId/'+o+'" srclang="en" label="English">'),c+="</video>",$("#vp").html(c).promise().done(function(){$("#progressing").fadeOut()}),$.fn.loadVideoJsPlayer(i)}});break;default:$.fn.displayErrorMsg("Kaltura video error!","Please double check your XML file.")}},$.fn.loadVideoJsPlayer=function(e){var t={techOrder:["html5","flash"],width:640,height:360,controls:!0,autoplay:!0,preload:"auto",plugins:{resolutions:!0}};($.fn.supportMp4()===!1||IS_WINDOWS&&IS_CHROME)&&(t.techOrder=["flash","html5"],t.plugins=null),$("#vp").fadeIn(),videojs(e,t,function(){videoPlayer=this,this.progressTips(),this.removeChild("FullscreenToggle")}),videojs.options.flash.swf=ROOT_PATH+"sources/videoplayer/video-js.swf"},$.fn.setupQuiz=function(e){for(var t=0,i=!1;!i||t>=questions.length;)questions[t].id===e?i=!0:t++;if($("#slide").html('<div id="quiz"><div class="header"><span class="icon-assessement"></span> Self-Assessment</div>'),questions[t].taken)$.fn.showFeedback(t);else if(""!==questions[t].img){var r=new Image;imgPath="assets/img/"+questions[t].img,$(r).load(function(){$("#quiz").append('<div class="question">'+questions[t].question+"</div>"),$(".question").append(r);var e="";""!==questions[t].audio&&(e='<audio controls><source src="assets/audio/'+questions[t].audio+'.mp3" type="audio/mpeg" /></audio>',$("#quiz").append(e)),$.fn.displayAnswerChoices(t)}).error(function(){$.fn.displayErrorMsg("image not found!","Expected image: "+imgPath)}).attr({src:imgPath,alt:questions[t].question,border:0})}else{var a="";""!==questions[t].audio&&(a='<audio controls><source src="assets/audio/'+questions[t].audio+'.mp3" type="audio/mpeg" /></audio>'),$("#quiz").append('<div class="question">'+questions[t].question+a+"</div>"),$.fn.displayAnswerChoices(t)}},$.fn.displayAnswerChoices=function(e){var t,i=!1;switch(questions[e].type){case"t/f":$("#quiz").append('<div class="answerArea"><label for="t"><input id="t" type="radio" name="tf" value="true" /> True</label><label for="f"><input type="radio" id="f" name="tf" value="false" /> False</label></div>');break;case"fib":$("#quiz").append('<div class="answerArea"><input type="text" id="saAns" /></div>');break;case"mc":var r="radio",a="mc";if(t=questions[e].answer.length,$("#quiz").append('<div class="answerArea">'),t>1&&(r="checkbox",a="ma"),"true"===questions[e].choiceImg)for(var n=0;n<questions[e].choice.length;n++)$(".answerArea").append('<label class="img_choice"for="'+n+'"><input id="'+n+'" type="'+r+'" name="'+a+'" value="'+questions[e].choice[n]+'" /> <img src="assets/img/'+questions[e].choice[n]+'" /></label>');else for(var o=0;o<questions[e].choice.length;o++)$(".answerArea").append('<label for="'+o+'"><input id="'+o+'" type="'+r+'" name="'+a+'" value="'+questions[e].choice[o]+'" /> '+questions[e].choice[o]+"</label>");$("#quiz").append("</div>");break;case"sa":$("#quiz").append('<div class="answerArea"><textarea id="saAns"></textArea></div>');break;default:i=!0,$.fn.displayErrorMsg("unknow question type!","Please double check the topic XML file.")}i||($("#quiz").append('<div class="submitArea"><a id="check" rel="'+e+'" href="#">SUBMIT</a></div>'),$("#slide").append("</div>"),$("#quiz").hide().fadeIn(),$("#check").on("click",function(){var e=Number($(this).attr("rel")),i;switch(questions[e].type){case"t/f":i=$("input:radio[name=tf]:checked").val(),void 0===i&&(i="");break;case"fib":i=$.trim($("#saAns").val());break;case"mc":t>1?(i=[],$("input:checkbox[name=ma]:checked").each(function(){i.push($(this).val())}),questions[e].incorrectIndex=0):(i=$("input:radio[name=mc]:checked").val(),questions[e].incorrectIndex=$("input:radio[name=mc]").index($("input:radio[name=mc]").filter(":checked"))),(void 0===i||i.length<=0)&&(i="");break;case"sa":i=$.trim($("#saAns").val());break;default:i=""}if(""!==i){switch(questions[e].type){case"fib":for(var r=0;r<questions[e].answer.length;r++)if(i.toLowerCase()===questions[e].answer[r].toLowerCase()){questions[e].correct=!0;break}break;case"t/f":questions[e].correct=i===String(questions[e].answer)?!0:!1;break;case"mc":var a=0;if(t>1){for(a=0;a<i.length;a++){if(!($.inArray(i[a],questions[e].answer)>=0)){questions[e].correct=!1;break}questions[e].correct=!0}a<questions[e].answer.length&&(questions[e].correct=!1)}else questions[e].correct=i===questions[e].answer[0]?!0:!1;break;default:questions[e].correct=!1}questions[e].stuAnswer=i,questions[e].taken=!0,$.fn.showFeedback(e)}else $(".question").before('<p class="quizIncorrect"><span class="icon-notification"></span> Please answer the question before submitting!</p>'),$(".quizIncorrect").delay(6e3).slideUp("slow",function(){$(".question").prev().remove()});return!1}))},$.fn.showFeedback=function(e){var t="",i="";if($("#slide").html('<div id="quiz"><div class="header"><span class="icon-assessement"></span> Self-Assessment Feedback</div>'),"sa"!==questions[e].type&&$("#quiz").append(questions[e].correct?'<p class="quizCorrect"><span class="icon-checkmark"></span> CORRECT</p>':'<p class="quizIncorrect"><span class="icon-notification"></span> INCORRECT</p>'),""!==questions[e].img&&(t='<img src="assets/img/'+questions[e].img+'" alt="'+questions[e].question+'" border="0" />'),""!==questions[e].audio&&(i='<audio controls><source src="assets/audio/'+questions[e].audio+'.mp3" type="audio/mpeg" /></audio>'),$("#quiz").append('<div class="question">'+questions[e].question+t+i+"</div>"),"true"===questions[e].choiceImg?($("#quiz").append('<div class="result"><p><strong>Your answer</strong>:<br />'+$.fn.parseArrayImg(questions[e].stuAnswer)+"</p></div>"),$(".result").append("<p><strong>Correct answer</strong>:<br />"+$.fn.parseArrayImg(questions[e].answer)+"</p>")):($("#quiz").append('<div class="result"><p><strong>Your answer</strong>: '+$.fn.parseArray(questions[e].stuAnswer)+"</p></div>"),$(".result").append("<p><strong>Correct answer</strong>: "+$.fn.parseArray(questions[e].answer)+"</p>")),"sa"!==questions[e].type)if(questions[e].correct)""!==String(questions[e].correctFeedback)&&$(".result").append("<p><strong>Feedback:</strong> "+questions[e].correctFeedback+"</p>");else if("mc"===questions[e].type){var r=questions[e].wrongFeedback[questions[e].incorrectIndex];void 0===r&&(r=questions[e].wrongFeedback),""!==String(r)&&$(".result").append("<p><strong>Feedback:</strong> "+r+"</p>")}else""!==String(questions[e].wrongFeedback)&&$(".result").append("<p><strong>Feedback:</strong> "+questions[e].wrongFeedback+"</p>")},$.fn.loadAudioPlayer=function(e,t){var i="100%",r=30;audioPlayer=new MediaElementPlayer(e,{audioWidth:i,audioHeight:r,startVolume:.8,loop:!1,enableAutosize:!0,iPadUseNativeControls:!1,iPhoneUseNativeControls:!1,AndroidUseNativeControls:!1,pauseOtherPlayers:!0,type:"audio/mpeg",success:function(e){sources=[{src:"assets/audio/"+t+".mp3",type:"audio/mpeg"}],e.setSrc(sources),e.load(),e.addEventListener("play",function(){$.fn.bindAudioPlayerFadeInOut()}),e.addEventListener("ended",function(){$.fn.unbindAudioPlayerFadeInOut()})}})},$.fn.bindAudioPlayerFadeInOut=function(){$("#ap").delay(3e3).fadeOut("slow"),$("#img, #ap").on("mouseenter",function(){$("#ap").stop(!0,!0).fadeIn("slow")}),$("#img, #ap").on("mouseleave",function(){$("#ap").stop(!1,!0).delay(1e3).fadeOut("slow")})},$.fn.unbindAudioPlayerFadeInOut=function(){$("#ap").fadeIn("fast"),$("#img, #ap").unbind("mouseenter"),$("#img, #ap").unbind("mouseleave")},$.fn.loadNote=function(e){var t=noteArray[e];$("#slideNote").hasClass("quizSlide")?$("#notesBtn").hide():($("#note").html(t).hide().fadeIn("fast"),$("#storybook_plus_wrapper").hasClass("magnified")&&$("#notesBtn").show()),$("#note").find("a").length&&$("#note a").each(function(){$(this).attr("target","_blank")})},$.fn.updateSlideNum=function(e){var t=e+1;counter=e,$("#selectable li").each(function(){$(this).removeClass("ui-selected")}),$("#selectable li:nth-child("+t+")").addClass("ui-selected"),$("#currentStatus").html(media+" "+t+" of "+topicCount)},$.fn.bindImgMagnify=function(){$("#magnifyBtn").on("click",function(){$("#storybook_plus_wrapper").hasClass("magnified")?($("#storybook_plus_wrapper").removeClass("magnified"),$(this).html('<span class="icon-expand" title="Expand"></span>'),$("#notesBtn, #tocBtn").hide()):($("#storybook_plus_wrapper").addClass("magnified"),$(this).html('<span class="icon-contract" title="Contract"></span>'),$("#tocBtn").show(),$("#slideNote").hasClass("quizSlide")||$("#notesBtn").show())})},$.fn.bindNoteSlideToggle=function(){var e=$("#note"),t=360,i=536;$("#notesBtn").on("click",function(){var r=Math.ceil(e.offset().top),a=0;r>=i?(a=t,$(this).addClass("active")):(a=i,$(this).removeClass("active")),$("#toc").offset().left<=642&&($("#toc").animate({left:900}),$("#tocBtn").removeClass("active")),e.animate({top:a})})},$.fn.bindTocSlideToggle=function(){var e=$("#toc"),t=642,i=900;$("#tocBtn").on("click",function(){var r=Math.ceil(e.offset().left),a=0;r>=i?(a=t,$(this).addClass("active")):(a=i,$(this).removeClass("active")),$("#note").offset().top>=360&&($("#note").animate({top:536}),$("#notesBtn").removeClass("active")),e.animate({left:a})})},$.fn.loadProfilePhoto=function(){var e=new Image,t="assets/pic.jpg";$(e).load(function(){$("#profile .photo").html('<img src="'+t+'" alt="Instructor Photo" border="0" />')}).error(function(){$("#profile .photo").html('<img src="'+ROOT_PATH+'sources/img/profile.png" width="200" height="300" alt="No Profile Photo" border="0" />')}).attr({src:t,border:0})},$.fn.getDownloadableFile=function(e,t,i){var r=e,a="Audio",n=$("#download_bar ul"),o=window.location.protocol;if("http:"!==o){var s=window.location.href;s=s.substr(0,s.lastIndexOf("/")+1).replace("https","http"),r=s+e}"pdf"===t&&(a="Transcript"),$.fn.fileExists(e,t,i)&&n.append('<li><a href="'+r+"."+t+'" target="_blank"><span class="icon-arrow-down"><span> '+a+"</a></li>")},$.fn.displayGetLessonError=function(e,t){var i,r;switch(e){case 0:i="<strong>Error 0</strong> - Not connect. Please verify network.";break;case 200:i="<strong>Error 200</strong> - Invalid characters in XML.";break;case 404:i="<strong>Error 404</strong> - Requested page not found.";break;case 406:i="<strong>Error 406</strong> - Not acceptable error.";break;case 500:i="<strong>Error 500</strong> - Internal Server Error.";break;default:i="Unknow error ... "+e}switch(t){case"parsererror":r="XML parse failed. Please double-check the <strong>topic.xml</strong> file in the <strong>assets</strong> directory. All node values must be wrapped inside <code>&lt;![CDATA[ ... ]]&gt;</code> or use HTML entity for special characters.";break;case"timeout":r="XML parsing timed out. It is taking too long for the browser.";break;case"abort":r="Ajax request aborted.";break;case"error":r="Failed to get requested source. Most likely a 404 or 406.";break;default:r="Uncaught Error ... "+e.responseText}$("#splash_screen, #player").hide(),$("#errorMsg").html("<p>"+i+"</p><p>"+r+"</p>")},$.fn.splitSelections=function(e){var t=e.split("|");return t},$.fn.displayErrorMsg=function(e,t){$("#slide").html('<div id="errorMsg"><p><strong>Error:</strong> '+e+"</p><p>"+t+"</p></div>")},$.fn.getDirectory=function(){var e=window.location.href,t;return t=e.split("?"),t=t[0].split("/"),t=t[t.length-2]},$.fn.fileExists=function(e,t,i){var r,a=i;switch(t){case"pdf":a="application/pdf"}return $.ajax({url:e+"."+t,type:"HEAD",dataType:"text",contentType:a,async:!1,beforeSend:function(e){e.overrideMimeType(a),e.setRequestHeader("Accept",a)},success:function(){r=!0},error:function(){r=!1}}),r},$.fn.getParameterByName=function(e){var t="[\\?&]"+e+"=([^&#]*)",i=new RegExp(t),r=i.exec(window.location.href);return e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),null===r?"":decodeURIComponent(r[1].replace(/\+/g," "))},$.fn.addLeadingZero=function(e){return 10>e?"0"+e:e},$.fn.parseArray=function(e){var t="";if($.isArray(e))for(var i=0;i<e.length;i++)t+=1===e.length?e[0]:i===e.length-1?e[i]:e[i]+", ";else t=e;return t},$.fn.parseArrayImg=function(e){var t="";if($.isArray(e))for(var i=0;i<e.length;i++)t+='<img src="assets/img/'+e[i]+'" /> ';else t='<img src="assets/img/'+e+'" /> ';return t},$.fn.stripScript=function(e){if(""!==e||void 0!==e){var t=$("<span>"+$.trim(e)+"</span>");return t.find("script,noscript,style").remove().end(),t.html()}return e},$.fn.supportWebm=function(){return!!document.createElement("video").canPlayType('video/webm; codecs="vp8.0, vorbis"')},$.fn.supportMp4=function(){return!!document.createElement("video").canPlayType('video/mp4; codecs="avc1.4D401E, mp4a.40.2"')},$.fn.getProgramDirectory=function(){var e=window.location.href.split("/");return void 0===e[4]?"":e[4]};